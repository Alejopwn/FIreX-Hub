Estructura de directorios y archivos escaneados (mar 18 nov 2025 15:26:29 -05)

Ra√≠z del escaneo: /home/alejandro/Documentos/ad/iiiiiiiiiiiiiiiiiiiiiiiiiiiiiii (2)
Excluyendo directorios: node_modules .git .hg .svn dist build .next .nuxt .svelte-kit .turbo coverage .cache .parcel-cache .vite .yarn .pnpm-store storybook-static
Incluyendo patrones: *.html *.css *.scss *.sass *.less *.js *.jsx *.mjs *.cjs *.ts *.tsx *.mts *.cts
Ignorando nombres: *.min.js *.min.css *.map
Tama√±o m√°ximo por archivo: 2 MiB

Directorios:
.
./app
./app/admin
./app/admin/categorias
./app/admin/productos
./app/admin/solicitudes
./app/admin/usuarios
./app/carrito
./app/login
./app/mis-solicitudes
./app/perfil
./app/productos
./app/productos/[id]
./app/servicios
./components
./components/ui
./contexts
./hooks
./lib
./public
./styles
./types

Archivos escaneados:
./app/globals.css
./app/carrito/page.tsx
./app/login/page.tsx
./app/productos/[id]/page.tsx
./app/productos/page.tsx
./app/admin/page.tsx
./app/admin/productos/page.tsx
./app/admin/usuarios/page.tsx
./app/admin/categorias/page.tsx
./app/admin/solicitudes/page.tsx
./app/mis-solicitudes/page.tsx
./app/servicios/page.tsx
./app/perfil/page.tsx
./app/page.tsx
./app/layout.tsx
./components/theme-provider.tsx
./components/ui/badge.tsx
./components/ui/button.tsx
./components/ui/card.tsx
./components/ui/dialog.tsx
./components/ui/dropdown-menu.tsx
./components/ui/input.tsx
./components/ui/label.tsx
./components/ui/select.tsx
./components/ui/sheet.tsx
./components/ui/table.tsx
./components/ui/tabs.tsx
./components/ui/textarea.tsx
./components/ui/toast.tsx
./components/ui/toaster.tsx
./components/ui/separator.tsx
./components/LoadingSpinner.tsx
./components/Header.tsx
./components/ProductCard.tsx
./components/AnimatedBackground.tsx
./components/ValidatedInput.tsx
./hooks/use-mobile.ts
./hooks/use-toast.ts
./lib/utils.ts
./lib/api-client.ts
./lib/validators.ts
./next.config.mjs
./postcss.config.mjs
./styles/globals.css
./contexts/AuthContext.tsx
./types/api.ts
./next-env.d.ts

===============================

===== ./app/globals.css =====
@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

:root {
  --background: oklch(0.99 0.002 106);
  --foreground: oklch(0.18 0.02 281);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.18 0.02 281);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.18 0.02 281);
  --primary: oklch(0.47 0.18 28);
  --primary-foreground: oklch(0.99 0 0);
  --secondary: oklch(0.96 0.006 85);
  --secondary-foreground: oklch(0.18 0.02 281);
  --muted: oklch(0.95 0.006 106);
  --muted-foreground: oklch(0.55 0.015 281);
  --accent: oklch(0.58 0.20 38);
  --accent-foreground: oklch(0.99 0 0);
  --destructive: oklch(0.55 0.22 25);
  --destructive-foreground: oklch(0.99 0 0);
  --border: oklch(0.92 0.004 106);
  --input: oklch(0.92 0.004 106);
  --ring: oklch(0.47 0.18 28);
  --chart-1: oklch(0.47 0.18 28);
  --chart-2: oklch(0.58 0.20 38);
  --chart-3: oklch(0.398 0.07 227);
  --chart-4: oklch(0.828 0.189 84);
  --chart-5: oklch(0.769 0.188 70);
  --radius: 0.75rem;
  --sidebar: oklch(0.99 0 0);
  --sidebar-foreground: oklch(0.18 0.02 281);
  --sidebar-primary: oklch(0.47 0.18 28);
  --sidebar-primary-foreground: oklch(0.99 0 0);
  --sidebar-accent: oklch(0.96 0.006 85);
  --sidebar-accent-foreground: oklch(0.18 0.02 281);
  --sidebar-border: oklch(0.92 0.004 106);
  --sidebar-ring: oklch(0.47 0.18 28);
}

/* Updated to fully dark theme with deeper blacks and stronger contrasts */
.dark {
  --background: oklch(0.06 0.01 281);
  --foreground: oklch(0.96 0.002 106);
  --card: oklch(0.10 0.012 281);
  --card-foreground: oklch(0.96 0.002 106);
  --popover: oklch(0.10 0.012 281);
  --popover-foreground: oklch(0.96 0.002 106);
  --primary: oklch(0.60 0.24 28);
  --primary-foreground: oklch(0.06 0.01 281);
  --secondary: oklch(0.14 0.015 281);
  --secondary-foreground: oklch(0.96 0.002 106);
  --muted: oklch(0.16 0.015 281);
  --muted-foreground: oklch(0.60 0.012 281);
  --accent: oklch(0.65 0.22 38);
  --accent-foreground: oklch(0.06 0.01 281);
  --destructive: oklch(0.60 0.24 25);
  --destructive-foreground: oklch(0.96 0.002 106);
  --border: oklch(0.18 0.015 281);
  --input: oklch(0.18 0.015 281);
  --ring: oklch(0.60 0.24 28);
  --chart-1: oklch(0.60 0.24 28);
  --chart-2: oklch(0.65 0.22 38);
  --chart-3: oklch(0.769 0.188 70);
  --chart-4: oklch(0.627 0.265 304);
  --chart-5: oklch(0.645 0.246 16);
  --sidebar: oklch(0.10 0.012 281);
  --sidebar-foreground: oklch(0.96 0.002 106);
  --sidebar-primary: oklch(0.60 0.24 28);
  --sidebar-primary-foreground: oklch(0.06 0.01 281);
  --sidebar-accent: oklch(0.14 0.015 281);
  --sidebar-accent-foreground: oklch(0.96 0.002 106);
  --sidebar-border: oklch(0.18 0.015 281);
  --sidebar-ring: oklch(0.60 0.24 28);
}

@theme inline {
  --font-sans: 'Geist', 'Geist Fallback';
  --font-mono: 'Geist Mono', 'Geist Mono Fallback';
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground antialiased;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* Added more advanced animations */
  .animate-fade-in {
    animation: fadeIn 0.8s ease-out forwards;
  }
  
  .animate-slide-up {
    animation: slideUp 0.8s ease-out forwards;
  }
  
  .animate-slide-in-left {
    animation: slideInLeft 0.6s ease-out forwards;
  }
  
  .animate-slide-in-right {
    animation: slideInRight 0.6s ease-out forwards;
  }
  
  .animate-scale-in {
    animation: scaleIn 0.5s ease-out forwards;
  }
  
  .animate-float {
    animation: float 3s ease-in-out infinite;
  }
  
  .animate-glow {
    animation: glow 2s ease-in-out infinite alternate;
  }
  
  .animate-shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    background-size: 200% 100%;
    animation: shimmer 2s infinite;
  }
  
  .animate-pulse-slow {
    animation: pulseSlow 4s ease-in-out infinite;
  }
  
  .animate-rotate-slow {
    animation: rotateSlow 20s linear infinite;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(40px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-40px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(40px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }
  
  @keyframes glow {
    from {
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
    }
    to {
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.6), 0 0 40px rgba(249, 115, 22, 0.3);
    }
  }
  
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }
  
  @keyframes pulseSlow {
    0%, 100% {
      opacity: 0.6;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.05);
    }
  }
  
  @keyframes rotateSlow {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  
  .gradient-text {
    background: linear-gradient(135deg, #ef4444, #f97316);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .glass-effect {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .dark .glass-effect {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.05);
  }
}

@layer base {
  html {
    scroll-behavior: smooth;
  }
  
  *:focus-visible {
    outline: 2px solid var(--color-ring);
    outline-offset: 2px;
  }
}

===== ./app/carrito/page.tsx =====
'use client';

import { useState, useEffect } from 'react';
import { LoadingSpinner } from '@/components/LoadingSpinner';
import { useAuth } from '@/contexts/AuthContext';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Trash2, Minus, Plus, ShoppingBag } from 'lucide-react';
import Link from 'next/link';
import Image from 'next/image';
import { getCart, updateCartItem, removeFromCart, clearCart } from '@/lib/api-client';
import type { Cart } from '@/types/api';
import { useToast } from '@/hooks/use-toast';

function CartContent() {
  const { user } = useAuth();
  const { toast } = useToast();
  const [cart, setCart] = useState<Cart | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    if (user) {
      loadCart();
    } else {
      setLoading(false);
    }
  }, [user]);

  const loadCart = async () => {
    if (!user) return;
    
    try {
      const response = await getCart(user.id);
      if (response.success && response.data) {
        setCart(response.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'No se pudo cargar el carrito',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleUpdateQuantity = async (productId: string, newQuantity: number) => {
    if (!user || newQuantity < 1) return;

    try {
      const response = await updateCartItem(user.id, productId, newQuantity);
      if (response.success && response.data) {
        setCart(response.data);
        toast({
          title: 'Carrito actualizado',
          description: 'La cantidad se actualiz√≥ correctamente',
        });
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: error instanceof Error ? error.message : 'No se pudo actualizar el carrito',
        variant: 'destructive',
      });
    }
  };

  const handleRemoveItem = async (productId: string) => {
    if (!user) return;

    try {
      const response = await removeFromCart(user.id, productId);
      if (response.success && response.data) {
        setCart(response.data);
        toast({
          title: 'Producto eliminado',
          description: 'El producto se elimin√≥ del carrito',
        });
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'No se pudo eliminar el producto',
        variant: 'destructive',
      });
    }
  };

  const handleClearCart = async () => {
    if (!user) return;

    try {
      const response = await clearCart(user.id);
      if (response.success && response.data) {
        setCart(response.data);
        toast({
          title: 'Carrito vaciado',
          description: 'Se eliminaron todos los productos del carrito',
        });
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'No se pudo vaciar el carrito',
        variant: 'destructive',
      });
    }
  };

  if (loading) {
    return (
      <div className="min-h-screen flex flex-col">
        <main className="flex-1 flex items-center justify-center">
          <LoadingSpinner />
        </main>
      </div>
    );
  }

  if (!user) {
    return (
      <div className="min-h-screen flex flex-col">
        <main className="flex-1 flex items-center justify-center">
          <Card className="max-w-md w-full mx-4">
            <CardContent className="p-8 text-center">
              <ShoppingBag className="h-16 w-16 mx-auto mb-4 text-muted-foreground" />
              <h2 className="text-2xl font-bold mb-2">Inicia sesi√≥n</h2>
              <p className="text-muted-foreground mb-6">
                Debes iniciar sesi√≥n para ver tu carrito de compras
              </p>
              <Button asChild className="w-full">
                <Link href="/login">Iniciar Sesi√≥n</Link>
              </Button>
            </CardContent>
          </Card>
        </main>
      </div>
    );
  }

  if (!cart || cart.items.length === 0) {
    return (
      <div className="min-h-screen flex flex-col">
        <main className="flex-1 flex items-center justify-center">
          <Card className="max-w-md w-full mx-4">
            <CardContent className="p-8 text-center">
              <ShoppingBag className="h-16 w-16 mx-auto mb-4 text-muted-foreground" />
              <h2 className="text-2xl font-bold mb-2">Tu carrito est√° vac√≠o</h2>
              <p className="text-muted-foreground mb-6">
                Agrega productos desde nuestro cat√°logo
              </p>
              <Button asChild className="w-full">
                <Link href="/productos">Ver Productos</Link>
              </Button>
            </CardContent>
          </Card>
        </main>
      </div>
    );
  }

  return (
    <div className="min-h-screen flex flex-col">
      
      <main className="flex-1 py-8">
        <div className="container mx-auto px-4">
          <div className="mb-8 flex items-center justify-between">
            <div>
              <h1 className="text-4xl font-bold mb-2">Carrito de Compras</h1>
              <p className="text-muted-foreground">
                {cart.totalItems} {cart.totalItems === 1 ? 'producto' : 'productos'}
              </p>
            </div>
            <Button variant="outline" onClick={handleClearCart}>
              <Trash2 className="mr-2 h-4 w-4" />
              Vaciar Carrito
            </Button>
          </div>

          <div className="grid lg:grid-cols-3 gap-8">
            {/* Cart Items */}
            <div className="lg:col-span-2 space-y-4">
              {cart.items.map((item) => (
                <Card key={item.productId}>
                  <CardContent className="p-4">
                    <div className="flex gap-4">
                      <div className="relative h-24 w-24 rounded-md overflow-hidden bg-muted flex-shrink-0">
                        <Image
                          src={`/.jpg?height=96&width=96&query=${encodeURIComponent(item.name)}`}
                          alt={item.name}
                          fill
                          className="object-cover"
                        />
                      </div>
                      
                      <div className="flex-1 min-w-0">
                        <h3 className="font-semibold text-lg mb-1">{item.name}</h3>
                        <p className="text-primary font-semibold mb-3">
                          ${item.price.toLocaleString()}
                        </p>
                        
                        <div className="flex items-center gap-2">
                          <Button
                            variant="outline"
                            size="icon"
                            className="h-8 w-8"
                            onClick={() => handleUpdateQuantity(item.productId, item.quantity - 1)}
                            disabled={item.quantity <= 1}
                          >
                            <Minus className="h-3 w-3" />
                          </Button>
                          <Input
                            type="number"
                            min="1"
                            value={item.quantity}
                            onChange={(e) => handleUpdateQuantity(item.productId, parseInt(e.target.value) || 1)}
                            className="w-16 h-8 text-center"
                          />
                          <Button
                            variant="outline"
                            size="icon"
                            className="h-8 w-8"
                            onClick={() => handleUpdateQuantity(item.productId, item.quantity + 1)}
                          >
                            <Plus className="h-3 w-3" />
                          </Button>
                        </div>
                      </div>

                      <div className="text-right flex flex-col justify-between">
                        <p className="font-bold text-lg">
                          ${item.subtotal.toLocaleString()}
                        </p>
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={() => handleRemoveItem(item.productId)}
                          className="text-destructive hover:text-destructive"
                        >
                          <Trash2 className="h-4 w-4" />
                        </Button>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>

            {/* Order Summary */}
            <div className="lg:col-span-1">
              <Card className="sticky top-20">
                <CardHeader>
                  <CardTitle>Resumen del Pedido</CardTitle>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="flex justify-between text-sm">
                    <span className="text-muted-foreground">Subtotal</span>
                    <span className="font-semibold">${cart.totalPrice.toLocaleString()}</span>
                  </div>
                  <div className="flex justify-between text-sm">
                    <span className="text-muted-foreground">Env√≠o</span>
                    <span className="font-semibold">A calcular</span>
                  </div>
                  <div className="border-t border-border pt-4">
                    <div className="flex justify-between">
                      <span className="text-lg font-bold">Total</span>
                      <span className="text-2xl font-bold text-primary">
                        ${cart.totalPrice.toLocaleString()}
                      </span>
                    </div>
                  </div>
                </CardContent>
                <CardFooter className="flex flex-col gap-2">
                  <Button className="w-full" size="lg">
                    Continuar con la Compra
                  </Button>
                  <Button variant="outline" className="w-full" asChild>
                    <Link href="/productos">Seguir Comprando</Link>
                  </Button>
                </CardFooter>
              </Card>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
}

export default function CartPage() {
  return <CartContent />;
}

===== ./app/login/page.tsx =====
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import { useAuth } from '@/contexts/AuthContext';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import Link from 'next/link';
import { login as apiLogin } from '@/lib/api-client';
import { useToast } from '@/hooks/use-toast';
import { ValidatedInput } from '@/components/ValidatedInput';
import { validateLoginForm, validateRegisterForm, validators } from '@/lib/validators';
import type { RegisterRequest, ApiResponse, UserResponse } from '@/types/api';

// Helper para hacer llamadas directas
async function apiCall<T>(endpoint: string, options?: RequestInit): Promise<T> {
  const BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8066';
  
  const response = await fetch(`${BASE_URL}${endpoint}`, {
    ...options,
    headers: {
      'Content-Type': 'application/json',
      ...options?.headers,
    },
  });

  if (!response.ok) {
    const error = await response.json().catch(() => ({ 
      message: `HTTP error! status: ${response.status}` 
    }));
    throw new Error(error.message || `Error ${response.status}`);
  }
  
  return response.json();
}

function LoginContent() {
  const router = useRouter();
  const { login: authLogin } = useAuth();
  const { toast } = useToast();

  const [loginEmail, setLoginEmail] = useState('');
  const [loginPassword, setLoginPassword] = useState('');
  const [isLoggingIn, setIsLoggingIn] = useState(false);

  const [registerName, setRegisterName] = useState('');
  const [registerEmail, setRegisterEmail] = useState('');
  const [registerPassword, setRegisterPassword] = useState('');
  const [registerPhone, setRegisterPhone] = useState('');
  const [registerAddress, setRegisterAddress] = useState('');
  const [isRegistering, setIsRegistering] = useState(false);

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();

    // ‚úÖ VALIDAR ANTES DE ENVIAR
    const validation = validateLoginForm(loginEmail, loginPassword);
    
    if (!validation.isValid) {
      const firstError = Object.values(validation.errors)[0];
      toast({
        title: 'Error de validaci√≥n',
        description: firstError,
        variant: 'destructive',
      });
      return;
    }

    setIsLoggingIn(true);

    try {
      console.log('üîê Intentando login con:', loginEmail);
      const response = await apiLogin(loginEmail, loginPassword);
      
      console.log('üì¶ Respuesta del servidor:', response);
      
      if (!response.user) {
        throw new Error('No se recibi√≥ informaci√≥n del usuario');
      }

      const token = response.token || (response as any).data?.token || 'dummy-token';
      
      console.log('‚úÖ Login exitoso:', {
        user: response.user.email,
        role: response.user.role,
        token: token ? '‚úì Token recibido' : '‚úó Sin token'
      });
      
      authLogin(response.user, token);
      
      toast({
        title: 'Bienvenido',
        description: `Hola ${response.user.name}!`,
      });
      
      setTimeout(() => {
        router.push('/');
      }, 100);
      
    } catch (error) {
      console.error('‚ùå Error en login:', error);
      toast({
        title: 'Error al iniciar sesi√≥n',
        description: error instanceof Error ? error.message : 'Credenciales inv√°lidas',
        variant: 'destructive',
      });
    } finally {
      setIsLoggingIn(false);
    }
  };

  const handleRegister = async (e: React.FormEvent) => {
    e.preventDefault();

    // ‚úÖ VALIDAR ANTES DE ENVIAR
    const registerData: RegisterRequest = {
      name: registerName,
      email: registerEmail,
      password: registerPassword,
      phone: registerPhone,
      address: registerAddress,
    };

    const validation = validateRegisterForm(registerData);

    if (!validation.isValid) {
      setIsRegistering(false);
      
      // Mostrar todos los errores
      Object.entries(validation.errors).forEach(([field, error]) => {
        toast({
          title: `Error en ${field}`,
          description: error,
          variant: 'destructive',
        });
      });
      return;
    }

    setIsRegistering(true);

    try {
      console.log('üìù Registrando usuario:', {
        name: registerName,
        email: registerEmail,
        phone: registerPhone,
        address: registerAddress
      });

      const response = await apiCall<ApiResponse<UserResponse>>('/api/users/register', {
        method: 'POST',
        body: JSON.stringify(registerData),
      });

      console.log('‚úÖ Registro exitoso:', response);

      if (response.success && response.data) {
        toast({
          title: 'Registro exitoso',
          description: 'Ahora puedes iniciar sesi√≥n',
        });
        
        // Cambiar a la pesta√±a de login y pre-llenar el email
        const loginTab = document.querySelector('[value="login"]') as HTMLElement;
        loginTab?.click();
        setLoginEmail(registerEmail);
        
        // Limpiar campos de registro
        setRegisterName('');
        setRegisterEmail('');
        setRegisterPassword('');
        setRegisterPhone('');
        setRegisterAddress('');
      }
    } catch (error) {
      console.error('‚ùå Error en registro:', error);
      toast({
        title: 'Error al registrarse',
        description: error instanceof Error ? error.message : 'No se pudo completar el registro',
        variant: 'destructive',
      });
    } finally {
      setIsRegistering(false);
    }
  };

  return (
    <div className="min-h-screen flex flex-col">
      <main className="flex-1 flex items-center justify-center py-12 px-4">
        <Card className="w-full max-w-md">
          <CardHeader>
            <CardTitle className="text-2xl">Bienvenido a FireX</CardTitle>
            <CardDescription>
              Inicia sesi√≥n o crea una cuenta para continuar
            </CardDescription>
          </CardHeader>
          
          <CardContent>
            <Tabs defaultValue="login" className="w-full">
              <TabsList className="grid w-full grid-cols-2">
                <TabsTrigger value="login">Iniciar Sesi√≥n</TabsTrigger>
                <TabsTrigger value="register">Registrarse</TabsTrigger>
              </TabsList>
              
              <TabsContent value="login">
                <form onSubmit={handleLogin} className="space-y-4">
                  <ValidatedInput
                    id="login-email"
                    label="Email"
                    type="email"
                    value={loginEmail}
                    onChange={setLoginEmail}
                    validator={validators.email}
                    errorMessage="Email inv√°lido"
                    placeholder="tu@email.com"
                    required
                  />

                  <ValidatedInput
                    id="login-password"
                    label="Contrase√±a"
                    type="password"
                    value={loginPassword}
                    onChange={setLoginPassword}
                    validator={validators.required}
                    errorMessage="La contrase√±a es requerida"
                    required
                    showValidIcon={false}
                  />

                  <Button type="submit" className="w-full" disabled={isLoggingIn}>
                    {isLoggingIn ? 'Iniciando sesi√≥n...' : 'Iniciar Sesi√≥n'}
                  </Button>
                </form>
              </TabsContent>
              
              <TabsContent value="register">
                <form onSubmit={handleRegister} className="space-y-4">
                  <ValidatedInput
                    id="register-name"
                    label="Nombre Completo"
                    type="text"
                    value={registerName}
                    onChange={setRegisterName}
                    validator={validators.name}
                    errorMessage="Nombre inv√°lido (m√≠nimo 3 letras)"
                    placeholder="Alejandro Santamaria"
                    required
                  />
                  
                  <ValidatedInput
                    id="register-email"
                    label="Email"
                    type="email"
                    value={registerEmail}
                    onChange={setRegisterEmail}
                    validator={validators.email}
                    errorMessage="Email inv√°lido"
                    placeholder="alejandro@correo.uis.edu.co"
                    required
                  />
                  
                  <ValidatedInput
                    id="register-password"
                    label="Contrase√±a"
                    type="password"
                    value={registerPassword}
                    onChange={setRegisterPassword}
                    validator={validators.password}
                    errorMessage="M√≠nimo 6 caracteres"
                    placeholder="M√≠nimo 6 caracteres"
                    required
                    helperText="Tu contrase√±a debe tener al menos 6 caracteres"
                    showValidIcon={false}
                  />
                  
                  <ValidatedInput
                    id="register-phone"
                    label="Tel√©fono"
                    type="tel"
                    value={registerPhone}
                    onChange={setRegisterPhone}
                    validator={validators.phone}
                    errorMessage="Tel√©fono inv√°lido (ej: 3001234567)"
                    placeholder="3001234567"
                    required
                    helperText="Debe ser un celular colombiano de 10 d√≠gitos"
                    pattern="3[0-9]{9}"
                  />
                  
                  <ValidatedInput
                    id="register-address"
                    label="Direcci√≥n"
                    type="text"
                    value={registerAddress}
                    onChange={setRegisterAddress}
                    validator={validators.address}
                    errorMessage="Direcci√≥n muy corta (m√≠nimo 10 caracteres)"
                    placeholder="Calle 123 #45-67, Bucaramanga"
                    required
                  />
                  
                  <Button type="submit" className="w-full" disabled={isRegistering}>
                    {isRegistering ? 'Registrando...' : 'Crear Cuenta'}
                  </Button>
                </form>
              </TabsContent>
            </Tabs>
          </CardContent>
          
          <CardFooter>
            <p className="text-sm text-muted-foreground text-center w-full">
              Al continuar, aceptas nuestros{' '}
              <Link href="#" className="text-primary hover:underline">
                t√©rminos y condiciones
              </Link>
            </p>
          </CardFooter>
        </Card>
      </main>
    </div>
  );
}

export default function LoginPage() {
  return <LoginContent />;
}
===== ./app/productos/[id]/page.tsx =====
'use client';

import { useState, useEffect } from 'react';
import { useParams } from 'next/navigation';
import { LoadingSpinner } from '@/components/LoadingSpinner';
import { useAuth } from '@/contexts/AuthContext';
import { Button } from '@/components/ui/button';
import { Card, CardContent } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { ShoppingCart, Minus, Plus } from 'lucide-react';
import Image from 'next/image';
import Link from 'next/link';
import { getProductById, addToCart } from '@/lib/api-client';
import type { Product } from '@/types/api';
import { useToast } from '@/hooks/use-toast';

function ProductDetailContent() {
  const params = useParams();
  const { user } = useAuth();
  const { toast } = useToast();
  const [product, setProduct] = useState<Product | null>(null);
  const [loading, setLoading] = useState(true);
  const [quantity, setQuantity] = useState(1);
  const [isAdding, setIsAdding] = useState(false);

  useEffect(() => {
    if (params.id) {
      loadProduct(params.id as string);
    }
  }, [params.id]);

  const loadProduct = async (id: string) => {
    try {
      const response = await getProductById(id);
      if (response.success && response.data) {
        setProduct(response.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'No se pudo cargar el producto',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleAddToCart = async () => {
    if (!user) {
      toast({
        title: 'Debes iniciar sesi√≥n',
        description: 'Inicia sesi√≥n para agregar productos al carrito',
        variant: 'destructive',
      });
      return;
    }

    if (!product) return;

    setIsAdding(true);
    try {
      const response = await addToCart(user.id, product.id, quantity);
      if (response.success) {
        toast({
          title: 'Producto agregado',
          description: `${quantity} unidad(es) de ${product.name} agregado al carrito`,
        });
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: error instanceof Error ? error.message : 'No se pudo agregar el producto',
        variant: 'destructive',
      });
    } finally {
      setIsAdding(false);
    }
  };

  if (loading) {
    return (
      <div className="min-h-screen flex flex-col">
        <main className="flex-1 flex items-center justify-center">
          <LoadingSpinner />
        </main>
      </div>
    );
  }

  if (!product) {
    return (
      <div className="min-h-screen flex flex-col">
        <main className="flex-1 flex items-center justify-center">
          <div className="text-center">
            <h2 className="text-2xl font-bold mb-4">Producto no encontrado</h2>
            <Button asChild>
              <Link href="/productos">Volver al cat√°logo</Link>
            </Button>
          </div>
        </main>
      </div>
    );
  }

  return (
    <div className="min-h-screen flex flex-col">
      
      <main className="flex-1 py-8">
        <div className="container mx-auto px-4">
          <div className="mb-6">
            <Link href="/productos" className="text-sm text-muted-foreground hover:text-foreground">
              ‚Üê Volver al cat√°logo
            </Link>
          </div>

          <div className="grid md:grid-cols-2 gap-8">
            {/* Product Image */}
            <div className="relative aspect-square bg-muted rounded-lg overflow-hidden">
              <Image
                src={product.imageUrl || `/placeholder.svg?height=600&width=600&query=${encodeURIComponent(product.name)}`}
                alt={product.name}
                fill
                className="object-cover"
                priority
              />
            </div>

            {/* Product Info */}
            <div className="flex flex-col gap-6">
              <div>
                <h1 className="text-3xl md:text-4xl font-bold mb-2">{product.name}</h1>
                <div className="flex items-center gap-2 mb-4">
                  {product.stock === 0 && (
                    <Badge variant="destructive">Agotado</Badge>
                  )}
                  {product.stock > 0 && product.stock <= 10 && (
                    <Badge variant="secondary">√öltimas {product.stock} unidades</Badge>
                  )}
                  {product.stock > 10 && (
                    <Badge variant="secondary">En stock: {product.stock}</Badge>
                  )}
                </div>
              </div>

              <div>
                <p className="text-3xl font-bold text-primary">
                  ${product.price.toLocaleString()}
                </p>
              </div>

              <Card>
                <CardContent className="p-6">
                  <h3 className="font-semibold mb-2">Descripci√≥n</h3>
                  <p className="text-muted-foreground leading-relaxed">
                    {product.description}
                  </p>
                </CardContent>
              </Card>

              {/* Quantity Selector */}
              <div className="flex flex-col gap-4">
                <div>
                  <label className="text-sm font-medium mb-2 block">Cantidad</label>
                  <div className="flex items-center gap-2">
                    <Button
                      variant="outline"
                      size="icon"
                      onClick={() => setQuantity(Math.max(1, quantity - 1))}
                      disabled={quantity <= 1}
                    >
                      <Minus className="h-4 w-4" />
                    </Button>
                    <Input
                      type="number"
                      min="1"
                      max={product.stock}
                      value={quantity}
                      onChange={(e) => setQuantity(Math.max(1, Math.min(product.stock, parseInt(e.target.value) || 1)))}
                      className="w-20 text-center"
                    />
                    <Button
                      variant="outline"
                      size="icon"
                      onClick={() => setQuantity(Math.min(product.stock, quantity + 1))}
                      disabled={quantity >= product.stock}
                    >
                      <Plus className="h-4 w-4" />
                    </Button>
                  </div>
                </div>

                <Button
                  size="lg"
                  onClick={handleAddToCart}
                  disabled={product.stock === 0 || isAdding}
                  className="w-full"
                >
                  <ShoppingCart className="mr-2 h-5 w-5" />
                  {isAdding ? 'Agregando...' : 'Agregar al Carrito'}
                </Button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  );
}

export default function ProductDetailPage() {
  return <ProductDetailContent />;
}

===== ./app/productos/page.tsx =====
'use client';

import { useState, useEffect } from 'react';
import { ProductCard } from '@/components/ProductCard';
import { LoadingSpinner } from '@/components/LoadingSpinner';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Search } from 'lucide-react';
import { getProducts, getCategories, searchProducts, getProductsByCategory } from '@/lib/api-client';
import type { Product, Category } from '@/types/api';
import { useToast } from '@/hooks/use-toast';

export default function ProductsPage() {
  const [products, setProducts] = useState<Product[]>([]);
  const [categories, setCategories] = useState<Category[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [selectedCategory, setSelectedCategory] = useState<string>('all');
  const { toast } = useToast();

  useEffect(() => {
    loadInitialData();
  }, []);

  const loadInitialData = async () => {
    try {
      const [productsRes, categoriesRes] = await Promise.all([
        getProducts(),
        getCategories(),
      ]);

      if (productsRes.success && productsRes.data) {
        setProducts(productsRes.data);
      }
      if (categoriesRes.success && categoriesRes.data) {
        setCategories(categoriesRes.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'No se pudieron cargar los productos',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleSearch = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!searchTerm.trim()) {
      loadInitialData();
      return;
    }

    setLoading(true);
    try {
      const response = await searchProducts(searchTerm);
      if (response.success && response.data) {
        setProducts(response.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al buscar productos',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleCategoryChange = async (categoryId: string) => {
    setSelectedCategory(categoryId);
    
    if (categoryId === 'all') {
      loadInitialData();
      return;
    }

    setLoading(true);
    try {
      const response = await getProductsByCategory(categoryId);
      if (response.success && response.data) {
        setProducts(response.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al filtrar productos',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex flex-col">
      <main className="flex-1 py-8">
        <div className="container mx-auto px-4">
          <div className="mb-8 animate-fade-in">
            <h1 className="text-4xl md:text-5xl font-bold mb-2">
              Cat√°logo de <span className="gradient-text">Productos</span>
            </h1>
            <p className="text-muted-foreground text-lg">
              Equipos profesionales contra incendios certificados
            </p>
          </div>

          <div className="mb-8 flex flex-col md:flex-row gap-4 animate-slide-up">
            <form onSubmit={handleSearch} className="flex-1 flex gap-2">
              <Input
                placeholder="Buscar productos..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="flex-1 glass-effect border-primary/20 focus:border-primary transition-all"
              />
              <Button type="submit" className="bg-gradient-to-r from-primary to-accent hover:opacity-90 hover:scale-105 transition-all duration-300">
                <Search className="h-4 w-4" />
                <span className="sr-only">Buscar</span>
              </Button>
            </form>

            <Select value={selectedCategory} onValueChange={handleCategoryChange}>
              <SelectTrigger className="w-full md:w-[200px] glass-effect border-primary/20">
                <SelectValue placeholder="Categor√≠a" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">Todas las categor√≠as</SelectItem>
                {categories.map((category) => (
                  <SelectItem key={category.id} value={category.id}>
                    {category.name}
                  </SelectItem>
                ))}
              </SelectContent>
            </Select>
          </div>

          {/* Products Grid */}
          {loading ? (
            <LoadingSpinner />
          ) : products.length === 0 ? (
            <div className="text-center py-12">
              <p className="text-muted-foreground">No se encontraron productos</p>
            </div>
          ) : (
            <div className="grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
              {products.map((product, index) => (
                <div 
                  key={product.id}
                  className="animate-scale-in"
                  style={{ animationDelay: `${index * 0.1}s` }}
                >
                  <ProductCard product={product} />
                </div>
              ))}
            </div>
          )}
        </div>
      </main>
    </div>
  );
}

===== ./app/admin/page.tsx =====
'use client';

import { useEffect, useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useRouter } from 'next/navigation';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import Link from 'next/link';
import { Package, Wrench, Users, TrendingUp, AlertTriangle } from 'lucide-react';
import { products, users, serviceRequests } from '@/lib/api-client';
import { useToast } from '@/hooks/use-toast';

export default function AdminDashboard() {
  const { user } = useAuth();
  const router = useRouter();
  const { toast } = useToast();
  
  const [stats, setStats] = useState({
    totalProducts: 0,
    lowStock: 0,
    pendingRequests: 0,
    totalUsers: 0,
    loading: true,
  });

  useEffect(() => {
    if (!user) {
      router.push('/login');
      return;
    }

    if (user.role !== 'ADMIN') {
      toast({
        title: 'Acceso Denegado',
        description: 'No tienes permisos para acceder al panel de administraci√≥n',
        variant: 'destructive',
      });
      router.push('/');
      return;
    }

    loadStats();
  }, [user, router]);

  const loadStats = async () => {
    try {
      // Cargar productos
      const productsRes = await products.getAll();
      const allProducts = productsRes.data || [];
      const totalProducts = allProducts.length;
      
      // Productos con stock bajo (< 10)
      const lowStock = allProducts.filter(p => p.stock > 0 && p.stock < 10).length;

      // Cargar usuarios
      const usersRes = await users.getAll();
      const totalUsers = usersRes.data?.length || 0;

      // Cargar solicitudes pendientes
      const requestsRes = await serviceRequests.getByStatus('PENDIENTE');
      const pendingRequests = requestsRes.data?.length || 0;

      setStats({
        totalProducts,
        lowStock,
        pendingRequests,
        totalUsers,
        loading: false,
      });

      console.log('‚úÖ Estad√≠sticas cargadas:', {
        totalProducts,
        lowStock,
        pendingRequests,
        totalUsers,
      });
    } catch (error) {
      console.error('‚ùå Error al cargar estad√≠sticas:', error);
      toast({
        title: 'Error',
        description: 'No se pudieron cargar las estad√≠sticas',
        variant: 'destructive',
      });
      setStats(prev => ({ ...prev, loading: false }));
    }
  };

  if (!user || stats.loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>
    );
  }

  const adminCards = [
    {
      title: 'Gesti√≥n de Productos',
      description: 'Crear, editar y eliminar productos del cat√°logo',
      icon: Package,
      href: '/admin/productos',
      color: 'text-blue-600',
      bgColor: 'bg-blue-50',
    },
    {
      title: 'Solicitudes de Servicio',
      description: 'Gestionar recargas y mantenimientos',
      icon: Wrench,
      href: '/admin/solicitudes',
      color: 'text-orange-600',
      bgColor: 'bg-orange-50',
      badge: stats.pendingRequests > 0 ? stats.pendingRequests : undefined,
    },
    {
      title: 'Gesti√≥n de Usuarios',
      description: 'Administrar cuentas de clientes',
      icon: Users,
      href: '/admin/usuarios',
      color: 'text-green-600',
      bgColor: 'bg-green-50',
    },
    {
      title: 'Categor√≠as',
      description: 'Organizar productos por categor√≠as',
      icon: TrendingUp,
      href: '/admin/categorias',
      color: 'text-purple-600',
      bgColor: 'bg-purple-50',
    },
  ];

  return (
    <div className="min-h-screen bg-background">
      <div className="container mx-auto px-4 py-8">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-4xl font-bold mb-2">Panel de Administraci√≥n</h1>
          <p className="text-muted-foreground">
            Bienvenido, {user.name}. Gestiona tu tienda FireX desde aqu√≠.
          </p>
        </div>

        {/* Stats Cards */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between pb-2">
              <CardTitle className="text-sm font-medium text-muted-foreground">
                Total Productos
              </CardTitle>
              <Package className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{stats.totalProducts}</div>
              <p className="text-xs text-muted-foreground mt-1">
                Productos en cat√°logo
              </p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between pb-2">
              <CardTitle className="text-sm font-medium text-muted-foreground">
                Stock Bajo
              </CardTitle>
              <AlertTriangle className="h-4 w-4 text-orange-600" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold text-orange-600">
                {stats.lowStock}
              </div>
              <p className="text-xs text-muted-foreground mt-1">
                Productos con menos de 10 unidades
              </p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between pb-2">
              <CardTitle className="text-sm font-medium text-muted-foreground">
                Solicitudes Pendientes
              </CardTitle>
              <Wrench className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">
                {stats.pendingRequests}
              </div>
              <p className="text-xs text-muted-foreground mt-1">
                Esperando procesamiento
              </p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between pb-2">
              <CardTitle className="text-sm font-medium text-muted-foreground">
                Total Usuarios
              </CardTitle>
              <Users className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{stats.totalUsers}</div>
              <p className="text-xs text-muted-foreground mt-1">
                Usuarios registrados
              </p>
            </CardContent>
          </Card>
        </div>

        {/* Admin Cards */}
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          {adminCards.map((card) => (
            <Link key={card.href} href={card.href}>
              <Card className="hover:shadow-lg transition-shadow cursor-pointer h-full">
                <CardHeader>
                  <div className="flex items-start justify-between">
                    <div className={`p-3 rounded-lg ${card.bgColor}`}>
                      <card.icon className={`h-6 w-6 ${card.color}`} />
                    </div>
                    {card.badge && (
                      <span className="bg-red-600 text-white text-xs px-2 py-1 rounded-full animate-pulse">
                        {card.badge}
                      </span>
                    )}
                  </div>
                  <CardTitle className="mt-4">{card.title}</CardTitle>
                </CardHeader>
                <CardContent>
                  <p className="text-muted-foreground">{card.description}</p>
                  <Button variant="outline" className="mt-4 w-full">
                    Abrir
                  </Button>
                </CardContent>
              </Card>
            </Link>
          ))}
        </div>

        {/* Quick Actions */}
        {stats.lowStock > 0 && (
          <Card className="mt-6 border-orange-200 bg-orange-50/50">
            <CardContent className="pt-6">
              <div className="flex items-center gap-3">
                <AlertTriangle className="h-5 w-5 text-orange-600" />
                <div className="flex-1">
                  <p className="font-semibold text-orange-900">
                    ‚ö†Ô∏è Atenci√≥n: {stats.lowStock} productos con stock bajo
                  </p>
                  <p className="text-sm text-orange-700">
                    Revisa el inventario para evitar quedarte sin productos
                  </p>
                </div>
                <Button asChild variant="outline" className="border-orange-600 text-orange-600 hover:bg-orange-100">
                  <Link href="/admin/productos">
                    Ver Productos
                  </Link>
                </Button>
              </div>
            </CardContent>
          </Card>
        )}
      </div>
    </div>
  );
}
===== ./app/admin/productos/page.tsx =====
'use client';

import { useEffect, useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useRouter } from 'next/navigation';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import { useToast } from '@/hooks/use-toast';
import { Plus, Edit, Trash2, Search } from 'lucide-react';
import * as api from '@/lib/api-client';
import type { Product } from '@/types/api';
import Image from 'next/image';

export default function AdminProductsPage() {
  const { user } = useAuth();
  const router = useRouter();
  const { toast } = useToast();
  const [products, setProducts] = useState<Product[]>([]);
  const [categories, setCategories] = useState<any[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [editingProduct, setEditingProduct] = useState<Product | null>(null);
  const [formData, setFormData] = useState({
    name: '',
    description: '',
    price: '',
    stock: '',
    categoryId: '',
    imageUrl: '',
  });

  useEffect(() => {
    if (!user) {
      router.push('/login');
      return;
    }
    loadData();
  }, [user, router]);

  const loadData = async () => {
    try {
      const [productsRes, categoriesRes] = await Promise.all([
        api.getProducts(),
        api.getCategories(),
      ]);
      
      if (productsRes.success && productsRes.data) {
        setProducts(productsRes.data);
      }
      if (categoriesRes.success && categoriesRes.data) {
        setCategories(categoriesRes.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al cargar los datos',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);

    try {
      const productData = {
        name: formData.name,
        description: formData.description,
        price: parseFloat(formData.price),
        stock: parseInt(formData.stock),
        categoryId: formData.categoryId,
        imageUrl: formData.imageUrl || '/diverse-products-still-life.png',
      };

      if (editingProduct) {
        const response = await api.updateProduct(editingProduct.id, productData);
        if (response.success) {
          toast({
            title: '√âxito',
            description: 'Producto actualizado exitosamente',
          });
        }
      } else {
        const response = await api.createProduct(productData);
        if (response.success) {
          toast({
            title: '√âxito',
            description: 'Producto creado exitosamente',
          });
        }
      }

      setIsDialogOpen(false);
      resetForm();
      loadData();
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al guardar el producto',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleDelete = async (id: string) => {
    if (!confirm('¬øEst√°s seguro de eliminar este producto?')) return;

    try {
      const response = await api.deleteProduct(id);
      if (response.success) {
        toast({
          title: '√âxito',
          description: 'Producto eliminado',
        });
        loadData();
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al eliminar el producto',
        variant: 'destructive',
      });
    }
  };

  const handleEdit = (product: Product) => {
    setEditingProduct(product);
    setFormData({
      name: product.name,
      description: product.description,
      price: product.price.toString(),
      stock: product.stock.toString(),
      categoryId: product.categoryId,
      imageUrl: product.imageUrl || '',
    });
    setIsDialogOpen(true);
  };

  const resetForm = () => {
    setEditingProduct(null);
    setFormData({
      name: '',
      description: '',
      price: '',
      stock: '',
      categoryId: '',
      imageUrl: '',
    });
  };

  const filteredProducts = products.filter((product) =>
    product.name.toLowerCase().includes(searchTerm.toLowerCase())
  );

  if (loading && products.length === 0) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>
    );
  }

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="flex items-center justify-between mb-6">
        <div>
          <h1 className="text-3xl font-bold">Gesti√≥n de Productos</h1>
          <p className="text-muted-foreground">
            Administra el cat√°logo de productos
          </p>
        </div>
        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>
          <DialogTrigger asChild>
            <Button onClick={resetForm}>
              <Plus className="h-4 w-4 mr-2" />
              Nuevo Producto
            </Button>
          </DialogTrigger>
          <DialogContent className="max-w-2xl max-h-[90vh] overflow-y-auto">
            <DialogHeader>
              <DialogTitle>
                {editingProduct ? 'Editar Producto' : 'Nuevo Producto'}
              </DialogTitle>
            </DialogHeader>
            <form onSubmit={handleSubmit} className="space-y-4">
              <div className="space-y-2">
                <Label htmlFor="name">Nombre *</Label>
                <Input
                  id="name"
                  required
                  value={formData.name}
                  onChange={(e) =>
                    setFormData({ ...formData, name: e.target.value })
                  }
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="description">Descripci√≥n *</Label>
                <Textarea
                  id="description"
                  required
                  rows={3}
                  value={formData.description}
                  onChange={(e) =>
                    setFormData({ ...formData, description: e.target.value })
                  }
                />
              </div>

              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <Label htmlFor="price">Precio *</Label>
                  <Input
                    id="price"
                    type="number"
                    step="0.01"
                    required
                    value={formData.price}
                    onChange={(e) =>
                      setFormData({ ...formData, price: e.target.value })
                    }
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="stock">Stock *</Label>
                  <Input
                    id="stock"
                    type="number"
                    required
                    value={formData.stock}
                    onChange={(e) =>
                      setFormData({ ...formData, stock: e.target.value })
                    }
                  />
                </div>
              </div>

              <div className="space-y-2">
                <Label htmlFor="categoryId">Categor√≠a *</Label>
                <select
                  id="categoryId"
                  required
                  className="w-full rounded-md border border-input bg-background px-3 py-2"
                  value={formData.categoryId}
                  onChange={(e) =>
                    setFormData({ ...formData, categoryId: e.target.value })
                  }
                >
                  <option value="">Seleccionar categor√≠a</option>
                  {categories.map((cat) => (
                    <option key={cat.id} value={cat.id}>
                      {cat.name}
                    </option>
                  ))}
                </select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="imageUrl">URL de Imagen</Label>
                <Input
                  id="imageUrl"
                  type="url"
                  placeholder="https://ejemplo.com/imagen.jpg"
                  value={formData.imageUrl}
                  onChange={(e) =>
                    setFormData({ ...formData, imageUrl: e.target.value })
                  }
                />
              </div>

              <div className="flex gap-2 pt-4">
                <Button type="submit" disabled={loading} className="flex-1">
                  {loading ? 'Guardando...' : 'Guardar Producto'}
                </Button>
                <Button
                  type="button"
                  variant="outline"
                  onClick={() => setIsDialogOpen(false)}
                >
                  Cancelar
                </Button>
              </div>
            </form>
          </DialogContent>
        </Dialog>
      </div>

      <Card>
        <CardHeader>
          <div className="flex items-center gap-2">
            <Search className="h-4 w-4 text-muted-foreground" />
            <Input
              placeholder="Buscar productos..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="max-w-sm"
            />
          </div>
        </CardHeader>
        <CardContent>
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Imagen</TableHead>
                <TableHead>Nombre</TableHead>
                <TableHead>Precio</TableHead>
                <TableHead>Stock</TableHead>
                <TableHead>Categor√≠a</TableHead>
                <TableHead className="text-right">Acciones</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {filteredProducts.map((product) => {
                const category = categories.find((c) => c.id === product.categoryId);
                return (
                  <TableRow key={product.id}>
                    <TableCell>
                      <Image
                        src={product.imageUrl || "/placeholder.svg"}
                        alt={product.name}
                        width={48}
                        height={48}
                        className="h-12 w-12 rounded object-cover"
                      />
                    </TableCell>
                    <TableCell className="font-medium">{product.name}</TableCell>
                    <TableCell>${product.price.toFixed(2)}</TableCell>
                    <TableCell>
                      <span
                        className={`px-2 py-1 rounded text-xs ${
                          product.stock < 10
                            ? 'bg-red-100 text-red-800'
                            : 'bg-green-100 text-green-800'
                        }`}
                      >
                        {product.stock}
                      </span>
                    </TableCell>
                    <TableCell>{category?.name || 'Sin categor√≠a'}</TableCell>
                    <TableCell className="text-right">
                      <div className="flex justify-end gap-2">
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={() => handleEdit(product)}
                        >
                          <Edit className="h-4 w-4" />
                        </Button>
                        <Button
                          variant="ghost"
                          size="sm"
                          onClick={() => handleDelete(product.id)}
                        >
                          <Trash2 className="h-4 w-4 text-destructive" />
                        </Button>
                      </div>
                    </TableCell>
                  </TableRow>
                );
              })}
            </TableBody>
          </Table>

          {filteredProducts.length === 0 && (
            <div className="text-center py-12 text-muted-foreground">
              No se encontraron productos
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
}
===== ./app/admin/usuarios/page.tsx =====
'use client';

import { useEffect, useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useRouter } from 'next/navigation';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import { useToast } from '@/hooks/use-toast';
import { Search, Trash2, Mail, Phone } from 'lucide-react';
import * as api from '@/lib/api-client';
import type { UserResponse } from '@/types/api';

export default function AdminUsersPage() {
  const { user } = useAuth();
  const router = useRouter();
  const { toast } = useToast();
  const [users, setUsers] = useState<UserResponse[]>([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');

  useEffect(() => {
    if (!user) {
      router.push('/login');
      return;
    }
    loadUsers();
  }, [user, router]);

  const loadUsers = async () => {
    try {
      const response = await api.getAllUsers();
      if (response.success && response.data) {
        setUsers(response.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al cargar los usuarios',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleDelete = async (id: string) => {
    if (!confirm('¬øEst√°s seguro de eliminar este usuario?')) return;

    try {
      const response = await api.deleteUser(id);
      if (response.success) {
        toast({
          title: '√âxito',
          description: 'Usuario eliminado',
        });
        loadUsers();
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al eliminar el usuario',
        variant: 'destructive',
      });
    }
  };

  const filteredUsers = users.filter(
    (u) =>
      u.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
      u.email.toLowerCase().includes(searchTerm.toLowerCase())
  );

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>
    );
  }

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="mb-6">
        <h1 className="text-3xl font-bold mb-2">Gesti√≥n de Usuarios</h1>
        <p className="text-muted-foreground">
          Administra las cuentas de clientes
        </p>
      </div>

      <Card>
        <CardContent className="pt-6">
          <div className="flex items-center gap-2 mb-6">
            <Search className="h-4 w-4 text-muted-foreground" />
            <Input
              placeholder="Buscar por nombre o email..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="max-w-sm"
            />
          </div>

          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Nombre</TableHead>
                <TableHead>Email</TableHead>
                <TableHead>Tel√©fono</TableHead>
                <TableHead>Rol</TableHead>
                <TableHead className="text-right">Acciones</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {filteredUsers.map((u) => (
                <TableRow key={u.id}>
                  <TableCell className="font-medium">{u.name}</TableCell>
                  <TableCell>
                    <div className="flex items-center gap-2">
                      <Mail className="h-4 w-4 text-muted-foreground" />
                      {u.email}
                    </div>
                  </TableCell>
                  <TableCell>
                    <div className="flex items-center gap-2">
                      <Phone className="h-4 w-4 text-muted-foreground" />
                      {u.phone || 'N/A'}
                    </div>
                  </TableCell>
                  <TableCell>
                    <Badge variant={u.role === 'ADMIN' ? 'default' : 'secondary'}>
                      {u.role}
                    </Badge>
                  </TableCell>
                  <TableCell className="text-right">
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => handleDelete(u.id)}
                      disabled={u.role === 'ADMIN'}
                    >
                      <Trash2 className="h-4 w-4 text-destructive" />
                    </Button>
                  </TableCell>
                </TableRow>
              ))}
            </TableBody>
          </Table>

          {filteredUsers.length === 0 && (
            <div className="text-center py-12 text-muted-foreground">
              No se encontraron usuarios
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
}
===== ./app/admin/categorias/page.tsx =====
'use client';

import { useEffect, useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useRouter } from 'next/navigation';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import { useToast } from '@/hooks/use-toast';
import { Plus, Edit, Trash2 } from 'lucide-react';
import * as api from '@/lib/api-client';
import type { Category } from '@/types/api';

export default function AdminCategoriesPage() {
  const { user } = useAuth();
  const router = useRouter();
  const { toast } = useToast();
  const [categories, setCategories] = useState<Category[]>([]);
  const [loading, setLoading] = useState(true);
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [editingCategory, setEditingCategory] = useState<Category | null>(null);
  const [formData, setFormData] = useState({
    name: '',
    description: '',
  });

  useEffect(() => {
    if (!user) {
      router.push('/login');
      return;
    }
    loadCategories();
  }, [user, router]);

  const loadCategories = async () => {
    try {
      const response = await api.getCategories();
      if (response.success && response.data) {
        setCategories(response.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al cargar las categor√≠as',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);

    try {
      if (editingCategory) {
        const response = await api.updateCategory(editingCategory.id, formData);
        if (response.success) {
          toast({
            title: '√âxito',
            description: 'Categor√≠a actualizada exitosamente',
          });
        }
      } else {
        const response = await api.createCategory(formData);
        if (response.success) {
          toast({
            title: '√âxito',
            description: 'Categor√≠a creada exitosamente',
          });
        }
      }

      setIsDialogOpen(false);
      resetForm();
      loadCategories();
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al guardar la categor√≠a',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleDelete = async (id: string) => {
    if (!confirm('¬øEst√°s seguro de eliminar esta categor√≠a?')) return;

    try {
      const response = await api.deleteCategory(id);
      if (response.success) {
        toast({
          title: '√âxito',
          description: 'Categor√≠a eliminada',
        });
        loadCategories();
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al eliminar la categor√≠a',
        variant: 'destructive',
      });
    }
  };

  const handleEdit = (category: Category) => {
    setEditingCategory(category);
    setFormData({
      name: category.name,
      description: category.description ?? "",
    });
    setIsDialogOpen(true);
  };

  const resetForm = () => {
    setEditingCategory(null);
    setFormData({ name: '', description: '' });
  };

  if (loading && categories.length === 0) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>
    );
  }

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="flex items-center justify-between mb-6">
        <div>
          <h1 className="text-3xl font-bold">Gesti√≥n de Categor√≠as</h1>
          <p className="text-muted-foreground">Organiza los productos por categor√≠as</p>
        </div>
        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>
          <DialogTrigger asChild>
            <Button onClick={resetForm}>
              <Plus className="h-4 w-4 mr-2" />
              Nueva Categor√≠a
            </Button>
          </DialogTrigger>
          <DialogContent>
            <DialogHeader>
              <DialogTitle>
                {editingCategory ? 'Editar Categor√≠a' : 'Nueva Categor√≠a'}
              </DialogTitle>
            </DialogHeader>
            <form onSubmit={handleSubmit} className="space-y-4">
              <div className="space-y-2">
                <Label htmlFor="name">Nombre *</Label>
                <Input
                  id="name"
                  required
                  value={formData.name}
                  onChange={(e) =>
                    setFormData({ ...formData, name: e.target.value })
                  }
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="description">Descripci√≥n *</Label>
                <Textarea
                  id="description"
                  required
                  rows={3}
                  value={formData.description}
                  onChange={(e) =>
                    setFormData({ ...formData, description: e.target.value })
                  }
                />
              </div>

              <div className="flex gap-2 pt-4">
                <Button type="submit" disabled={loading} className="flex-1">
                  {loading ? 'Guardando...' : 'Guardar Categor√≠a'}
                </Button>
                <Button
                  type="button"
                  variant="outline"
                  onClick={() => setIsDialogOpen(false)}
                >
                  Cancelar
                </Button>
              </div>
            </form>
          </DialogContent>
        </Dialog>
      </div>

      <Card>
        <CardContent className="pt-6">
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Nombre</TableHead>
                <TableHead>Descripci√≥n</TableHead>
                <TableHead className="text-right">Acciones</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {categories.map((category) => (
                <TableRow key={category.id}>
                  <TableCell className="font-medium">{category.name}</TableCell>
                  <TableCell className="text-muted-foreground">
                    {category.description}
                  </TableCell>
                  <TableCell className="text-right">
                    <div className="flex justify-end gap-2">
                      <Button
                        variant="ghost"
                        size="sm"
                        onClick={() => handleEdit(category)}
                      >
                        <Edit className="h-4 w-4" />
                      </Button>
                      <Button
                        variant="ghost"
                        size="sm"
                        onClick={() => handleDelete(category.id)}
                      >
                        <Trash2 className="h-4 w-4 text-destructive" />
                      </Button>
                    </div>
                  </TableCell>
                </TableRow>
              ))}
            </TableBody>
          </Table>

          {categories.length === 0 && (
            <div className="text-center py-12 text-muted-foreground">
              No hay categor√≠as registradas
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
}
===== ./app/admin/solicitudes/page.tsx =====
'use client';

import { useEffect, useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useRouter } from 'next/navigation';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { useToast } from '@/hooks/use-toast';
import { Calendar, MapPin, Phone, Mail, Wrench } from 'lucide-react';
import * as api from '@/lib/api-client';
import type { ServiceRequest } from '@/types/api';

const statusConfig = {
  PENDIENTE: { label: 'Pendiente', color: 'bg-yellow-100 text-yellow-800' },
  RECOGIDO: { label: 'Recogido', color: 'bg-blue-100 text-blue-800' },
  EN_RECARGA: { label: 'En Recarga', color: 'bg-purple-100 text-purple-800' },
  LISTO: { label: 'Listo', color: 'bg-green-100 text-green-800' },
  ENTREGADO: { label: 'Entregado', color: 'bg-teal-100 text-teal-800' },
  FINALIZADO: { label: 'Finalizado', color: 'bg-gray-100 text-gray-800' },
};

export default function AdminServiceRequestsPage() {
  const { user } = useAuth();
  const router = useRouter();
  const { toast } = useToast();
  const [requests, setRequests] = useState<ServiceRequest[]>([]);
  const [loading, setLoading] = useState(true);
  const [filterStatus, setFilterStatus] = useState<string>('ALL');

  useEffect(() => {
    if (!user) {
      router.push('/login');
      return;
    }
    loadRequests();
  }, [user, router]);

  const loadRequests = async () => {
    try {
      const response = await api.getAllServiceRequests();
      if (response.success && response.data) {
        setRequests(response.data);
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al cargar las solicitudes',
        variant: 'destructive',
      });
    } finally {
      setLoading(false);
    }
  };

  const handleStatusChange = async (requestId: string, newStatus: string) => {
    try {
      const response = await api.updateServiceRequestStatus(requestId, newStatus, user?.email || 'admin');
      if (response.success) {
        toast({
          title: '√âxito',
          description: 'Estado actualizado correctamente',
        });
        loadRequests();
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: 'Error al actualizar el estado',
        variant: 'destructive',
      });
    }
  };

  const filteredRequests =
    filterStatus === 'ALL'
      ? requests
      : requests.filter((r) => r.status === filterStatus);

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>
    );
  }

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="mb-6">
        <h1 className="text-3xl font-bold mb-2">Solicitudes de Servicio</h1>
        <p className="text-muted-foreground">
          Gestiona las solicitudes de recarga de extintores
        </p>
      </div>

      <div className="mb-6 flex gap-4">
        <Select value={filterStatus} onValueChange={setFilterStatus}>
          <SelectTrigger className="w-[200px]">
            <SelectValue placeholder="Filtrar por estado" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="ALL">Todos</SelectItem>
            <SelectItem value="PENDIENTE">Pendientes</SelectItem>
            <SelectItem value="RECOGIDO">Recogidos</SelectItem>
            <SelectItem value="EN_RECARGA">En Recarga</SelectItem>
            <SelectItem value="LISTO">Listos</SelectItem>
            <SelectItem value="ENTREGADO">Entregados</SelectItem>
            <SelectItem value="FINALIZADO">Finalizados</SelectItem>
          </SelectContent>
        </Select>
      </div>

      <div className="grid gap-4">
        {filteredRequests.map((request) => (
          <Card key={request.id}>
            <CardHeader>
              <div className="flex items-start justify-between">
                <div className="space-y-1">
                  <CardTitle className="text-xl">
                    Solicitud #{request.requestId}
                  </CardTitle>
                  <div className="flex items-center gap-2 text-sm text-muted-foreground">
                    <Calendar className="h-4 w-4" />
                    {new Date(request.createdAt).toLocaleDateString('es-ES')}
                  </div>
                </div>
                <Badge className={statusConfig[request.status as keyof typeof statusConfig].color}>
                  {statusConfig[request.status as keyof typeof statusConfig].label}
                </Badge>
              </div>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid md:grid-cols-2 gap-4">
                <div className="space-y-2">
                  <h4 className="font-semibold flex items-center gap-2">
                    <Wrench className="h-4 w-4" />
                    Detalles del Servicio
                  </h4>
                  <div className="space-y-1 text-sm">
                    <p>
                      <span className="font-medium">Tipo:</span> {request.extinguisherType}
                    </p>
                    <p>
                      <span className="font-medium">Capacidad:</span> {request.capacity}
                    </p>
                    {request.serialNumber && (
                      <p>
                        <span className="font-medium">N¬∫ Serie:</span>{' '}
                        {request.serialNumber}
                      </p>
                    )}
                  </div>
                </div>

                <div className="space-y-2">
                  <h4 className="font-semibold">Informaci√≥n de Contacto</h4>
                  <div className="space-y-1 text-sm">
                    <p className="flex items-center gap-2">
                      <Mail className="h-4 w-4" />
                      {request.customerEmail}
                    </p>
                    <p className="flex items-center gap-2">
                      <Phone className="h-4 w-4" />
                      {request.phoneNumber}
                    </p>
                    <p className="flex items-center gap-2">
                      <MapPin className="h-4 w-4" />
                      {request.address}
                    </p>
                  </div>
                </div>
              </div>

              {request.additionalNotes && (
                <div className="space-y-2">
                  <h4 className="font-semibold">Notas Adicionales</h4>
                  <p className="text-sm text-muted-foreground">
                    {request.additionalNotes}
                  </p>
                </div>
              )}

              <div className="flex items-center gap-4 pt-4 border-t">
                <label className="text-sm font-medium">Cambiar Estado:</label>
                <Select
                  value={request.status}
                  onValueChange={(value) => handleStatusChange(request.id, value)}
                >
                  <SelectTrigger className="w-[200px]">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="PENDIENTE">Pendiente</SelectItem>
                    <SelectItem value="RECOGIDO">Recogido</SelectItem>
                    <SelectItem value="EN_RECARGA">En Recarga</SelectItem>
                    <SelectItem value="LISTO">Listo</SelectItem>
                    <SelectItem value="ENTREGADO">Entregado</SelectItem>
                    <SelectItem value="FINALIZADO">Finalizado</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              {request.timeline && request.timeline.length > 0 && (
                <div className="space-y-2 pt-4 border-t">
                  <h4 className="font-semibold">Historial de Estados</h4>
                  <div className="space-y-2">
                    {request.timeline.map((item, index) => (
                      <div
                        key={index}
                        className="flex items-center gap-3 text-sm text-muted-foreground"
                      >
                        <div className="h-2 w-2 rounded-full bg-primary"></div>
                        <span className="font-medium">
                          {statusConfig[item.status as keyof typeof statusConfig]?.label}
                        </span>
                        <span>-</span>
                        <span>{new Date(item.timestamp).toLocaleString('es-ES')}</span>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </CardContent>
          </Card>
        ))}

        {filteredRequests.length === 0 && (
          <Card>
            <CardContent className="text-center py-12">
              <p className="text-muted-foreground">No hay solicitudes para mostrar</p>
            </CardContent>
          </Card>
        )}
      </div>
    </div>
  );
}
===== ./app/mis-solicitudes/page.tsx =====
'use client';

import { useState, useEffect } from 'react';
import { LoadingSpinner } from '@/components/LoadingSpinner';
import { useAuth } from '@/contexts/AuthContext';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';
import { toast } from 'sonner';
import Link from 'next/link';
import { getMyServiceRequests } from '@/lib/api-client';
import type { ServiceRequest } from '@/types/api';

const statusConfig = {
  PENDIENTE: { label: 'Pendiente', color: 'bg-yellow-100 text-yellow-800' },
  RECOGIDO: { label: 'Recogido', color: 'bg-blue-100 text-blue-800' },
  EN_RECARGA: { label: 'En Recarga', color: 'bg-purple-100 text-purple-800' },
  LISTO: { label: 'Listo', color: 'bg-green-100 text-green-800' },
  ENTREGADO: { label: 'Entregado', color: 'bg-teal-100 text-teal-800' },
  FINALIZADO: { label: 'Finalizado', color: 'bg-gray-100 text-gray-800' },
};

export default function MyRequestsPage() {
  const { user } = useAuth();
  const [requests, setRequests] = useState<ServiceRequest[]>([]);
  const [loading, setLoading] = useState(true);
  const [selectedRequest, setSelectedRequest] = useState<ServiceRequest | null>(null);

  useEffect(() => {
    if (user) {
      loadRequests();
    } else {
      setLoading(false);
    }
  }, [user]);

  const loadRequests = async () => {
    if (!user) return;

    try {
      const response = await getMyServiceRequests(user.email);
      if (response.success && response.data) {
        setRequests(response.data);
      }
    } catch (error) {
      toast.error('No se pudieron cargar las solicitudes');
    } finally {
      setLoading(false);
    }
  };

  if (loading) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <LoadingSpinner />
      </div>
    );
  }

  if (!user) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <Card className="max-w-md w-full mx-4">
          <CardContent className="p-8 text-center">
            <h2 className="text-2xl font-bold mb-2">Inicia sesi√≥n</h2>
            <p className="text-muted-foreground mb-6">
              Debes iniciar sesi√≥n para ver tus solicitudes
            </p>
            <Button asChild className="w-full">
              <Link href="/login">Iniciar Sesi√≥n</Link>
            </Button>
          </CardContent>
        </Card>
      </div>
    );
  }

  return (
    <div className="min-h-screen py-8">
      <div className="container mx-auto px-4 max-w-4xl">
        <div className="mb-8 flex items-center justify-between">
          <div>
            <h1 className="text-4xl font-bold mb-2">Mis Solicitudes</h1>
            <p className="text-muted-foreground">
              Historial de servicios de recarga
            </p>
          </div>
          <Button asChild>
            <Link href="/servicios">Nueva Solicitud</Link>
          </Button>
        </div>

        {requests.length === 0 ? (
          <Card>
            <CardContent className="p-8 text-center">
              <p className="text-muted-foreground mb-4">
                No tienes solicitudes registradas
              </p>
              <Button asChild>
                <Link href="/servicios">Crear Solicitud</Link>
              </Button>
            </CardContent>
          </Card>
        ) : (
          <div className="space-y-4">
            {requests.map((request) => (
              <Card key={request.id} className="hover:shadow-md transition-shadow">
                <CardHeader>
                  <div className="flex items-start justify-between">
                    <div>
                      <CardTitle className="text-xl mb-2">
                        Solicitud #{request.requestId}
                      </CardTitle>
                      <p className="text-sm text-muted-foreground">
                        Creada: {new Date(request.createdAt).toLocaleDateString('es-ES')}
                      </p>
                    </div>
                    <Badge className={statusConfig[request.status].color}>
                      {statusConfig[request.status].label}
                    </Badge>
                  </div>
                </CardHeader>
                <CardContent>
                  <div className="grid md:grid-cols-2 gap-4 mb-4">
                    <div>
                      <p className="text-sm text-muted-foreground">Tipo de Extintor</p>
                      <p className="font-medium">{request.extinguisherType}</p>
                    </div>
                    <div>
                      <p className="text-sm text-muted-foreground">Capacidad</p>
                      <p className="font-medium">{request.capacity}</p>
                    </div>
                  </div>
                  <Button
                    variant="outline"
                    onClick={() => setSelectedRequest(request)}
                  >
                    Ver Detalles
                  </Button>
                </CardContent>
              </Card>
            ))}
          </div>
        )}
      </div>

      {/* Request Detail Dialog */}
      <Dialog open={!!selectedRequest} onOpenChange={() => setSelectedRequest(null)}>
        <DialogContent className="max-w-2xl max-h-[80vh] overflow-y-auto">
          <DialogHeader>
            <DialogTitle>Detalle de Solicitud #{selectedRequest?.requestId}</DialogTitle>
          </DialogHeader>
          {selectedRequest && (
            <div className="space-y-6">
              <div>
                <h3 className="font-semibold mb-3">Estado Actual</h3>
                <Badge className={`${statusConfig[selectedRequest.status].color} text-base px-3 py-1`}>
                  {statusConfig[selectedRequest.status].label}
                </Badge>
              </div>

              <div>
                <h3 className="font-semibold mb-2">Informaci√≥n del Extintor</h3>
                <div className="grid grid-cols-2 gap-4 text-sm">
                  <div>
                    <span className="text-muted-foreground">Tipo:</span>
                    <p className="font-medium">{selectedRequest.extinguisherType}</p>
                  </div>
                  <div>
                    <span className="text-muted-foreground">Capacidad:</span>
                    <p className="font-medium">{selectedRequest.capacity}</p>
                  </div>
                  {selectedRequest.serialNumber && (
                    <div className="col-span-2">
                      <span className="text-muted-foreground">N¬∫ Serie:</span>
                      <p className="font-medium">{selectedRequest.serialNumber}</p>
                    </div>
                  )}
                </div>
              </div>

              <div>
                <h3 className="font-semibold mb-2">Informaci√≥n de Contacto</h3>
                <div className="space-y-1 text-sm">
                  <div>
                    <span className="text-muted-foreground">Email:</span>
                    <p className="font-medium">{selectedRequest.customerEmail}</p>
                  </div>
                  <div>
                    <span className="text-muted-foreground">Tel√©fono:</span>
                    <p className="font-medium">{selectedRequest.phoneNumber}</p>
                  </div>
                  <div>
                    <span className="text-muted-foreground">Direcci√≥n:</span>
                    <p className="font-medium">{selectedRequest.address}</p>
                  </div>
                  {selectedRequest.preferredDate && (
                    <div>
                      <span className="text-muted-foreground">Fecha Preferida:</span>
                      <p className="font-medium">
                        {new Date(selectedRequest.preferredDate).toLocaleDateString('es-ES')}
                      </p>
                    </div>
                  )}
                </div>
              </div>

              {selectedRequest.additionalNotes && (
                <div>
                  <h3 className="font-semibold mb-2">Notas Adicionales</h3>
                  <p className="text-sm text-muted-foreground">
                    {selectedRequest.additionalNotes}
                  </p>
                </div>
              )}

              {selectedRequest.timeline && selectedRequest.timeline.length > 0 && (
                <div>
                  <h3 className="font-semibold mb-4">Historial de Estados</h3>
                  <div className="space-y-3">
                    {selectedRequest.timeline.map((item, index) => (
                      <div key={index} className="flex gap-3">
                        <div className="flex flex-col items-center">
                          <div className="h-3 w-3 rounded-full bg-primary" />
                          {index < selectedRequest.timeline.length - 1 && (
                            <div className="flex-1 w-0.5 bg-border min-h-[24px]" />
                          )}
                        </div>
                        <div className="flex-1 pb-4">
                          <p className="font-medium text-sm">
                            {statusConfig[item.status]?.label || item.status}
                          </p>
                          <p className="text-xs text-muted-foreground">
                            {new Date(item.timestamp).toLocaleString('es-ES')}
                          </p>
                          <p className="text-xs text-muted-foreground">
                            Por: {item.updatedBy}
                          </p>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          )}
        </DialogContent>
      </Dialog>
    </div>
  );
}

===== ./app/servicios/page.tsx =====
'use client';

import { useState } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useRouter } from 'next/navigation';
import { Button } from '@/components/ui/button';
import { Label } from '@/components/ui/label';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { toast } from 'sonner';
import { createServiceRequest } from '@/lib/api-client';
import { ValidatedInput } from '@/components/ValidatedInput';
import { validateServiceRequest, validators } from '@/lib/validators';
import { AlertCircle } from 'lucide-react';

export default function ServiceRequestPage() {
  const { user } = useAuth();
  const router = useRouter();
  
  const [tipo, setTipo] = useState<"ABC" | "CO2" | "H2O" | "K">("ABC");
  const [estadoExtintor, setEstadoExtintor] = useState<"Operativo" | "Descargado" | "Vencido">("Operativo");
  const [fecha, setFecha] = useState('');
  const [franja, setFranja] = useState<"Ma√±ana" | "Tarde">("Ma√±ana");
  const [direccion, setDireccion] = useState('');
  const [telefono, setTelefono] = useState('');
  const [observaciones, setObservaciones] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  // Estado para errores de validaci√≥n
  const [validationErrors, setValidationErrors] = useState<Record<string, string>>({});

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!user) {
      toast.error('Debes iniciar sesi√≥n para crear una solicitud');
      router.push('/login');
      return;
    }

    // ‚úÖ VALIDACI√ìN COMPLETA ANTES DE ENVIAR
    const requestData = {
      tipo,
      estadoExtintor,
      fecha,
      franja,
      direccion,
      telefono,
      observaciones: observaciones || undefined,
    };

    const validation = validateServiceRequest(requestData);

    if (!validation.isValid) {
      setValidationErrors(validation.errors);
      
      // Mostrar el primer error
      const firstError = Object.values(validation.errors)[0];
      toast.error(firstError);
      
      // Scroll al primer campo con error
      const firstErrorField = Object.keys(validation.errors)[0];
      document.getElementById(firstErrorField)?.focus();
      
      return;
    }

    // Limpiar errores si la validaci√≥n pas√≥
    setValidationErrors({});
    setIsSubmitting(true);

    try {
      const response = await createServiceRequest(user.id, user.email, requestData);

      if (response.success && response.data) {
        toast.success(`Solicitud ${response.data.requestId} creada exitosamente`);
        
        // Reset form
        setTipo("ABC");
        setEstadoExtintor("Operativo");
        setFecha('');
        setFranja("Ma√±ana");
        setDireccion('');
        setTelefono('');
        setObservaciones('');
        
        // Redirect to my requests
        router.push('/mis-solicitudes');
      }
    } catch (error) {
      toast.error(error instanceof Error ? error.message : 'No se pudo crear la solicitud');
    } finally {
      setIsSubmitting(false);
    }
  };

  // Obtener fecha m√≠nima (hoy)
  const today = new Date().toISOString().split('T')[0];
  
  // Obtener fecha m√°xima (3 meses)
  const maxDate = new Date();
  maxDate.setMonth(maxDate.getMonth() + 3);
  const maxDateStr = maxDate.toISOString().split('T')[0];

  return (
    <div className="min-h-screen py-8">
      <div className="container mx-auto px-4 max-w-3xl">
        <div className="mb-8">
          <h1 className="text-4xl font-bold mb-2">Servicio de Recarga</h1>
          <p className="text-muted-foreground">
            Solicita el servicio de recarga y mantenimiento de extintores
          </p>
        </div>

        <Card>
          <CardHeader>
            <CardTitle>Nueva Solicitud de Servicio</CardTitle>
            <CardDescription>
              Completa el formulario para programar tu servicio de recarga
            </CardDescription>
          </CardHeader>
          <CardContent>
            <form onSubmit={handleSubmit} className="space-y-6">
              {/* Informaci√≥n del Extintor */}
              <div className="space-y-4">
                <h3 className="text-lg font-semibold">Informaci√≥n del Extintor</h3>
                
                <div className="space-y-2">
                  <Label htmlFor="tipo">Tipo de Extintor *</Label>
                  <Select value={tipo} onValueChange={(value: "ABC" | "CO2" | "H2O" | "K") => setTipo(value)}>
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="ABC">ABC - Polvo Qu√≠mico Seco</SelectItem>
                      <SelectItem value="CO2">CO2 - Di√≥xido de Carbono</SelectItem>
                      <SelectItem value="H2O">H2O - Agua</SelectItem>
                      <SelectItem value="K">K - Especial para Cocinas</SelectItem>
                    </SelectContent>
                  </Select>
                  {validationErrors.tipo && (
                    <div className="flex items-center gap-2 text-sm text-destructive">
                      <AlertCircle className="h-4 w-4" />
                      <span>{validationErrors.tipo}</span>
                    </div>
                  )}
                </div>

                <div className="space-y-2">
                  <Label htmlFor="estadoExtintor">Estado del Extintor *</Label>
                  <Select value={estadoExtintor} onValueChange={(value: "Operativo" | "Descargado" | "Vencido") => setEstadoExtintor(value)}>
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="Operativo">Operativo</SelectItem>
                      <SelectItem value="Descargado">Descargado</SelectItem>
                      <SelectItem value="Vencido">Vencido</SelectItem>
                    </SelectContent>
                  </Select>
                  {validationErrors.estadoExtintor && (
                    <div className="flex items-center gap-2 text-sm text-destructive">
                      <AlertCircle className="h-4 w-4" />
                      <span>{validationErrors.estadoExtintor}</span>
                    </div>
                  )}
                </div>
              </div>

              {/* Programaci√≥n del Servicio */}
              <div className="space-y-4">
                <h3 className="text-lg font-semibold">Programaci√≥n del Servicio</h3>
                
                <ValidatedInput
                  id="fecha"
                  label="Fecha Preferida"
                  type="date"
                  value={fecha}
                  onChange={setFecha}
                  validator={validators.date}
                  errorMessage="La fecha debe ser hoy o en el futuro"
                  required
                  min={today}
                  helperText={`Selecciona una fecha entre hoy y ${maxDateStr}`}
                />

                <div className="space-y-2">
                  <Label htmlFor="franja">Franja Horaria *</Label>
                  <Select value={franja} onValueChange={(value: "Ma√±ana" | "Tarde") => setFranja(value)}>
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="Ma√±ana">Ma√±ana (9:00 - 13:00)</SelectItem>
                      <SelectItem value="Tarde">Tarde (14:00 - 18:00)</SelectItem>
                    </SelectContent>
                  </Select>
                  {validationErrors.franja && (
                    <div className="flex items-center gap-2 text-sm text-destructive">
                      <AlertCircle className="h-4 w-4" />
                      <span>{validationErrors.franja}</span>
                    </div>
                  )}
                </div>
              </div>

              {/* Informaci√≥n de Contacto */}
              <div className="space-y-4">
                <h3 className="text-lg font-semibold">Informaci√≥n de Contacto</h3>
                
                <ValidatedInput
                  id="telefono"
                  label="Tel√©fono"
                  type="tel"
                  value={telefono}
                  onChange={setTelefono}
                  validator={validators.phone}
                  errorMessage="Debe ser un celular colombiano v√°lido"
                  placeholder="3001234567"
                  required
                  helperText="Formato: 10 d√≠gitos comenzando con 3"
                  pattern="3[0-9]{9}"
                />

                <ValidatedInput
                  id="direccion"
                  label="Direcci√≥n de Servicio"
                  type="textarea"
                  value={direccion}
                  onChange={setDireccion}
                  validator={validators.address}
                  errorMessage="La direcci√≥n debe tener al menos 10 caracteres"
                  placeholder="Direcci√≥n completa donde se realizar√° el servicio"
                  required
                  rows={3}
                />
              </div>

              {/* Observaciones */}
              <ValidatedInput
                id="observaciones"
                label="Observaciones"
                type="textarea"
                value={observaciones}
                onChange={setObservaciones}
                placeholder="Informaci√≥n adicional sobre tu solicitud..."
                rows={4}
                helperText="Opcional: Detalles adicionales que desees compartir"
              />

              <Button 
                type="submit" 
                className="w-full" 
                size="lg" 
                disabled={isSubmitting}
              >
                {isSubmitting ? 'Enviando solicitud...' : 'Crear Solicitud'}
              </Button>
            </form>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
===== ./app/perfil/page.tsx =====
'use client';

import { useState, useEffect } from 'react';
import { useAuth } from '@/contexts/AuthContext';
import { useRouter } from 'next/navigation';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Separator } from '@/components/ui/separator';
import { toast } from 'sonner';
import { updateProfile } from '@/lib/api-client';
import { User, Mail, Phone, MapPin, Shield } from 'lucide-react';

export default function ProfilePage() {
  const { user, setUser } = useAuth();
  const router = useRouter();
  
  const [name, setName] = useState('');
  const [phone, setPhone] = useState('');
  const [address, setAddress] = useState('');
  const [isLoading, setIsLoading] = useState(false);

  useEffect(() => {
    if (!user) {
      router.push('/login');
      return;
    }
    
    setName(user.name || '');
    setPhone(user.phone || '');
    setAddress(user.address || '');
  }, [user, router]);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!user) return;

    setIsLoading(true);

    try {
      const response = await updateProfile(user.id, {
        name,
        phone: phone || undefined,
        address: address || undefined,
      });

      if (response.success && response.data) {
        setUser(response.data);
        toast.success('Perfil actualizado exitosamente');
      }
    } catch (error) {
      toast.error(error instanceof Error ? error.message : 'Error al actualizar el perfil');
    } finally {
      setIsLoading(false);
    }
  };

  if (!user) {
    return null;
  }

  return (
    <div className="min-h-screen py-8">
      <div className="container mx-auto px-4 max-w-4xl">
        <div className="mb-8">
          <h1 className="text-4xl font-bold mb-2">Mi Perfil</h1>
          <p className="text-muted-foreground">
            Administra tu informaci√≥n personal
          </p>
        </div>

        <div className="grid gap-6 md:grid-cols-3">
          {/* User Info Card */}
          <Card className="md:col-span-1">
            <CardHeader>
              <CardTitle>Informaci√≥n General</CardTitle>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="flex items-center gap-3">
                <div className="p-2 rounded-full bg-primary/10">
                  <User className="h-5 w-5 text-primary" />
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Nombre</p>
                  <p className="font-medium">{user.name}</p>
                </div>
              </div>
              
              <Separator />
              
              <div className="flex items-center gap-3">
                <div className="p-2 rounded-full bg-primary/10">
                  <Mail className="h-5 w-5 text-primary" />
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Email</p>
                  <p className="font-medium text-sm break-all">{user.email}</p>
                </div>
              </div>
              
              <Separator />
              
              <div className="flex items-center gap-3">
                <div className="p-2 rounded-full bg-primary/10">
                  <Shield className="h-5 w-5 text-primary" />
                </div>
                <div>
                  <p className="text-sm text-muted-foreground">Rol</p>
                  <p className="font-medium">{user.role === 'ADMIN' ? 'Administrador' : 'Usuario'}</p>
                </div>
              </div>

              {user.phone && (
                <>
                  <Separator />
                  <div className="flex items-center gap-3">
                    <div className="p-2 rounded-full bg-primary/10">
                      <Phone className="h-5 w-5 text-primary" />
                    </div>
                    <div>
                      <p className="text-sm text-muted-foreground">Tel√©fono</p>
                      <p className="font-medium">{user.phone}</p>
                    </div>
                  </div>
                </>
              )}

              {user.address && (
                <>
                  <Separator />
                  <div className="flex items-center gap-3">
                    <div className="p-2 rounded-full bg-primary/10">
                      <MapPin className="h-5 w-5 text-primary" />
                    </div>
                    <div>
                      <p className="text-sm text-muted-foreground">Direcci√≥n</p>
                      <p className="font-medium text-sm">{user.address}</p>
                    </div>
                  </div>
                </>
              )}
            </CardContent>
          </Card>

          {/* Edit Profile Form */}
          <Card className="md:col-span-2">
            <CardHeader>
              <CardTitle>Editar Perfil</CardTitle>
              <CardDescription>
                Actualiza tu informaci√≥n de contacto
              </CardDescription>
            </CardHeader>
            <CardContent>
              <form onSubmit={handleSubmit} className="space-y-6">
                <div className="space-y-2">
                  <Label htmlFor="name">Nombre Completo *</Label>
                  <Input
                    id="name"
                    placeholder="Tu nombre completo"
                    value={name}
                    onChange={(e) => setName(e.target.value)}
                    required
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="email">Email</Label>
                  <Input
                    id="email"
                    type="email"
                    value={user.email}
                    disabled
                    className="bg-muted"
                  />
                  <p className="text-xs text-muted-foreground">
                    El email no puede ser modificado
                  </p>
                </div>

                <div className="space-y-2">
                  <Label htmlFor="phone">Tel√©fono</Label>
                  <Input
                    id="phone"
                    type="tel"
                    placeholder="+56 9 1234 5678"
                    value={phone}
                    onChange={(e) => setPhone(e.target.value)}
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="address">Direcci√≥n</Label>
                  <Input
                    id="address"
                    placeholder="Tu direcci√≥n"
                    value={address}
                    onChange={(e) => setAddress(e.target.value)}
                  />
                </div>

                <div className="flex gap-4">
                  <Button type="submit" disabled={isLoading} className="flex-1">
                    {isLoading ? 'Guardando...' : 'Guardar Cambios'}
                  </Button>
                  <Button
                    type="button"
                    variant="outline"
                    onClick={() => router.back()}
                  >
                    Cancelar
                  </Button>
                </div>
              </form>
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
  );
}

===== ./app/page.tsx =====
'use client';

import { Button } from '@/components/ui/button';
import { Card, CardContent } from '@/components/ui/card';
import Link from 'next/link';
import { Flame, Shield, Wrench, TrendingUp, CheckCircle, Clock, Award, Sparkles } from 'lucide-react';
import { useEffect, useState } from 'react';

export default function HomePage() {
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    setIsVisible(true);
  }, []);

  return (
    <div className="min-h-screen flex flex-col">
      <main className="flex-1">
        <section className="relative overflow-hidden bg-gradient-to-br from-background via-primary/5 to-accent/10 py-24 md:py-32">
          <div className="absolute inset-0 bg-grid-slate-900/[0.04] bg-[bottom_1px_center] dark:bg-grid-slate-400/[0.05]" />

          <div className="absolute top-20 left-10 h-72 w-72 bg-primary/10 rounded-full blur-3xl animate-float" style={{ animationDelay: '0s' }} />
          <div className="absolute bottom-20 right-10 h-96 w-96 bg-accent/10 rounded-full blur-3xl animate-float" style={{ animationDelay: '1s' }} />

          <div className="container relative mx-auto px-4">
            <div className={`max-w-4xl mx-auto text-center transition-all duration-1000 ${isVisible ? 'animate-fade-in' : 'opacity-0'}`}>
              <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full glass-effect text-primary text-sm font-medium mb-6 border border-primary/20 animate-shimmer">
                <Shield className="h-4 w-4" />
                Certificaci√≥n Internacional
              </div>

              <h1 className="text-5xl md:text-7xl font-bold text-balance mb-6 leading-tight">
                Protecci√≥n Contra Incendios de{' '}
                <span className="gradient-text animate-glow">Excelencia</span>
              </h1>

              <p className="text-lg md:text-xl text-muted-foreground text-balance mb-10 leading-relaxed max-w-2xl mx-auto">
                Equipos de √∫ltima generaci√≥n y servicios profesionales de recarga. Tu seguridad es nuestra prioridad absoluta.
              </p>

              <div className="flex flex-col sm:flex-row gap-4 justify-center">
                <Button
                  size="lg"
                  className="bg-gradient-to-r from-primary to-accent hover:scale-105 transition-all duration-300 text-base px-8 shadow-lg hover:shadow-xl"
                  asChild
                >
                  <Link href="/productos">
                    <Shield className="mr-2 h-5 w-5" />
                    Ver Cat√°logo
                  </Link>
                </Button>
                <Button
                  size="lg"
                  variant="outline"
                  className="text-base px-8 border-2 hover:bg-primary/10 hover:border-primary hover:scale-105 transition-all duration-300"
                  asChild
                >
                  <Link href="/servicios">
                    <Wrench className="mr-2 h-5 w-5" />
                    Solicitar Servicio
                  </Link>
                </Button>
              </div>

              <div className="flex flex-wrap justify-center gap-8 mt-16 text-sm text-muted-foreground">
                <div className="flex items-center gap-2 animate-slide-in-left" style={{ animationDelay: '0.2s' }}>
                  <CheckCircle className="h-5 w-5 text-primary" />
                  <span>Certificado ISO 9001</span>
                </div>
                <div className="flex items-center gap-2 animate-slide-in-left" style={{ animationDelay: '0.4s' }}>
                  <Clock className="h-5 w-5 text-primary" />
                  <span>Servicio 24/7</span>
                </div>
                <div className="flex items-center gap-2 animate-slide-in-left" style={{ animationDelay: '0.6s' }}>
                  <Award className="h-5 w-5 text-primary" />
                  <span>+10 a√±os de experiencia</span>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section className="py-20 md:py-32 relative overflow-hidden">
          <div className="container mx-auto px-4">
            <div className="text-center mb-16 animate-fade-in">
              <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-primary/10 text-primary text-sm font-medium mb-4">
                <Sparkles className="h-4 w-4" />
                Nuestras Ventajas
              </div>
              <h2 className="text-4xl md:text-5xl font-bold text-balance mb-4">
                ¬øPor qu√© elegir <span className="gradient-text">FireX</span>?
              </h2>
              <p className="text-lg text-muted-foreground max-w-2xl mx-auto">
                L√≠deres en equipos de seguridad con certificaci√≥n internacional
              </p>
            </div>

            <div className="grid md:grid-cols-3 gap-8">
              <Card className="border-2 hover:border-primary/50 transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 group animate-scale-in overflow-hidden relative" style={{ animationDelay: '0.1s' }}>
                <div className="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />
                <CardContent className="p-8 relative">
                  <div className="h-14 w-14 rounded-2xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg">
                    <Shield className="h-7 w-7 text-primary-foreground" />
                  </div>
                  <h3 className="text-2xl font-bold mb-3 group-hover:text-primary transition-colors">Equipos Certificados</h3>
                  <p className="text-muted-foreground leading-relaxed">
                    Todos nuestros productos cumplen con las normas internacionales ISO y est√°n respaldados por garant√≠a total.
                  </p>
                </CardContent>
              </Card>

              <Card className="border-2 hover:border-accent/50 transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 group animate-scale-in overflow-hidden relative" style={{ animationDelay: '0.2s' }}>
                <div className="absolute inset-0 bg-gradient-to-br from-accent/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />
                <CardContent className="p-8 relative">
                  <div className="h-14 w-14 rounded-2xl bg-gradient-to-br from-accent to-accent/60 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg">
                    <Wrench className="h-7 w-7 text-accent-foreground" />
                  </div>
                  <h3 className="text-2xl font-bold mb-3 group-hover:text-accent transition-colors">Servicio T√©cnico</h3>
                  <p className="text-muted-foreground leading-relaxed">
                    Recarga y mantenimiento profesional con t√©cnicos certificados y seguimiento en tiempo real de tu solicitud.
                  </p>
                </CardContent>
              </Card>

              <Card className="border-2 hover:border-primary/50 transition-all duration-500 hover:shadow-2xl hover:-translate-y-2 group animate-scale-in overflow-hidden relative" style={{ animationDelay: '0.3s' }}>
                <div className="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500" />
                <CardContent className="p-8 relative">
                  <div className="h-14 w-14 rounded-2xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center mb-6 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 shadow-lg">
                    <TrendingUp className="h-7 w-7 text-primary-foreground" />
                  </div>
                  <h3 className="text-2xl font-bold mb-3 group-hover:text-primary transition-colors">Mejor Precio</h3>
                  <p className="text-muted-foreground leading-relaxed">
                    Calidad profesional a precios competitivos. Invertir en seguridad nunca fue tan accesible y confiable.
                  </p>
                </CardContent>
              </Card>
            </div>
          </div>
        </section>

        <section className="py-20 md:py-32 bg-gradient-to-b from-background via-muted/20 to-background relative overflow-hidden">
          <div className="absolute inset-0 bg-grid-slate-900/[0.02] dark:bg-grid-slate-400/[0.05]" />
          <div className="container mx-auto px-4 relative">
            <Card className="border-2 border-primary/20 overflow-hidden shadow-2xl animate-scale-in bg-gradient-to-br from-card via-card to-muted/30">
              <div className="relative p-12 md:p-16 text-center overflow-hidden">
                {/* Efectos de fondo mejorados */}
                <div className="absolute inset-0 bg-gradient-to-br from-primary/10 via-accent/10 to-transparent" />
                <div className="absolute top-10 left-20 h-40 w-40 bg-primary/20 rounded-full blur-3xl animate-float" />
                <div className="absolute bottom-10 right-20 h-52 w-52 bg-accent/20 rounded-full blur-3xl animate-float" style={{ animationDelay: '1.5s' }} />

                <div className="relative">
                  <div className="h-20 w-20 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center mx-auto mb-8 animate-glow shadow-xl">
                    <Flame className="h-10 w-10 text-primary-foreground" />
                  </div>
                  <h2 className="text-4xl md:text-5xl font-bold mb-6 text-balance">
                    ¬øNecesitas <span className="gradient-text">recargar</span> tu extintor?
                  </h2>
                  <p className="text-lg mb-10 text-muted-foreground max-w-2xl mx-auto text-balance leading-relaxed">
                    Programa tu servicio de recarga y mantenimiento. Proceso r√°pido, confiable y con seguimiento en tiempo real.
                  </p>
                  <Button
                    size="lg"
                    className="text-base px-8 bg-gradient-to-r from-primary to-accent hover:scale-105 transition-all duration-300 shadow-2xl text-primary-foreground"
                    asChild
                  >
                    <Link href="/servicios">
                      Solicitar Servicio Ahora
                    </Link>
                  </Button>
                </div>
              </div>
            </Card>
          </div>
        </section>
      </main>

      <footer className="border-t border-border/40 py-12 bg-card relative">
        <div className="container mx-auto px-4">
          <div className="flex flex-col md:flex-row justify-between items-center gap-4">
            <div className="flex items-center gap-2 font-bold text-xl">
              <div className="h-8 w-8 rounded-lg bg-gradient-to-br from-primary to-accent flex items-center justify-center">
                <Flame className="h-4 w-4 text-primary-foreground" />
              </div>
              <span>Fire<span className="gradient-text">X</span></span>
            </div>
            <p className="text-sm text-muted-foreground">
              &copy; {new Date().getFullYear()} FireX. Todos los derechos reservados.
            </p>
          </div>
        </div>
      </footer>
    </div>
  );
}

===== ./app/layout.tsx =====
import type { Metadata } from 'next'
import { Geist, Geist_Mono } from 'next/font/google'
import './globals.css'
import { AuthProvider } from '@/contexts/AuthContext'
import { Toaster } from '@/components/ui/toaster'
import { Header } from '@/components/Header'
import { AnimatedBackground } from '@/components/AnimatedBackground'

const _geist = Geist({ subsets: ["latin"] });
const _geistMono = Geist_Mono({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: 'FireX - Equipos Contra Incendios',
  description: 'Venta de equipos contra incendios y servicio de recarga de extintores',
  generator: 'v0.app',
  icons: {
    icon: [
      {
        url: '/icon-light-32x32.png',
        media: '(prefers-color-scheme: light)',
      },
      {
        url: '/icon-dark-32x32.png',
        media: '(prefers-color-scheme: dark)',
      },
      {
        url: '/icon.svg',
        type: 'image/svg+xml',
      },
    ],
    apple: '/apple-icon.png',
  },
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="es" className="dark">
      <body className={`font-sans antialiased`}>
        <AnimatedBackground />
        <AuthProvider>
          <div className="relative z-10">
            <Header />
            {children}
          </div>
          <Toaster />
        </AuthProvider>
      </body>
    </html>
  )
}

===== ./components/theme-provider.tsx =====
'use client'

import * as React from 'react'
import {
  ThemeProvider as NextThemesProvider,
  type ThemeProviderProps,
} from 'next-themes'

export function ThemeProvider({ children, ...props }: ThemeProviderProps) {
  return <NextThemesProvider {...props}>{children}</NextThemesProvider>
}

===== ./components/ui/badge.tsx =====
import * as React from 'react'
import { Slot } from '@radix-ui/react-slot'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'

const badgeVariants = cva(
  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',
  {
    variants: {
      variant: {
        default:
          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',
        secondary:
          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',
        destructive:
          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',
        outline:
          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
)

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}: React.ComponentProps<'span'> &
  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : 'span'

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props}
    />
  )
}

export { Badge, badgeVariants }

===== ./components/ui/button.tsx =====
import * as React from 'react'
import { Slot } from '@radix-ui/react-slot'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: 'bg-primary text-primary-foreground hover:bg-primary/90',
        destructive:
          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',
        outline:
          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',
        secondary:
          'bg-secondary text-secondary-foreground hover:bg-secondary/80',
        ghost:
          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',
        link: 'text-primary underline-offset-4 hover:underline',
      },
      size: {
        default: 'h-9 px-4 py-2 has-[>svg]:px-3',
        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',
        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',
        icon: 'size-9',
        'icon-sm': 'size-8',
        'icon-lg': 'size-10',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
)

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}: React.ComponentProps<'button'> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean
  }) {
  const Comp = asChild ? Slot : 'button'

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Button, buttonVariants }

===== ./components/ui/card.tsx =====
import * as React from 'react'

import { cn } from '@/lib/utils'

function Card({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card"
      className={cn(
        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',
        className,
      )}
      {...props}
    />
  )
}

function CardHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',
        className,
      )}
      {...props}
    />
  )
}

function CardTitle({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-title"
      className={cn('leading-none font-semibold', className)}
      {...props}
    />
  )
}

function CardDescription({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-description"
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

function CardAction({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',
        className,
      )}
      {...props}
    />
  )
}

function CardContent({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-content"
      className={cn('px-6', className)}
      {...props}
    />
  )
}

function CardFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-footer"
      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}
      {...props}
    />
  )
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
}

===== ./components/ui/dialog.tsx =====
'use client'

import * as React from 'react'
import * as DialogPrimitive from '@radix-ui/react-dialog'
import { XIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function Dialog({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Root>) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />
}

function DialogTrigger({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />
}

function DialogPortal({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Portal>) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />
}

function DialogClose({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Close>) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />
}

function DialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {
  return (
    <DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',
        className,
      )}
      {...props}
    />
  )
}

function DialogContent({
  className,
  children,
  showCloseButton = true,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Content> & {
  showCloseButton?: boolean
}) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',
          className,
        )}
        {...props}
      >
        {children}
        {showCloseButton && (
          <DialogPrimitive.Close
            data-slot="dialog-close"
            className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"
          >
            <XIcon />
            <span className="sr-only">Close</span>
          </DialogPrimitive.Close>
        )}
      </DialogPrimitive.Content>
    </DialogPortal>
  )
}

function DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="dialog-header"
      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}
      {...props}
    />
  )
}

function DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn(
        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',
        className,
      )}
      {...props}
    />
  )
}

function DialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Title>) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn('text-lg leading-none font-semibold', className)}
      {...props}
    />
  )
}

function DialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Description>) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
}

===== ./components/ui/dropdown-menu.tsx =====
'use client'

import * as React from 'react'
import * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'
import { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  )
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  )
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',
          className,
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  )
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  )
}

function DropdownMenuItem({
  className,
  inset,
  variant = 'default',
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean
  variant?: 'default' | 'destructive'
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  )
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  )
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  )
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',
        className,
      )}
      {...props}
    />
  )
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn('bg-border -mx-1 my-1 h-px', className)}
      {...props}
    />
  )
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<'span'>) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        'text-muted-foreground ml-auto text-xs tracking-widest',
        className,
      )}
      {...props}
    />
  )
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  )
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',
        className,
      )}
      {...props}
    />
  )
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
}

===== ./components/ui/input.tsx =====
import * as React from 'react'

import { cn } from '@/lib/utils'

function Input({ className, type, ...props }: React.ComponentProps<'input'>) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',
        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',
        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',
        className,
      )}
      {...props}
    />
  )
}

export { Input }

===== ./components/ui/label.tsx =====
'use client'

import * as React from 'react'
import * as LabelPrimitive from '@radix-ui/react-label'

import { cn } from '@/lib/utils'

function Label({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',
        className,
      )}
      {...props}
    />
  )
}

export { Label }

===== ./components/ui/select.tsx =====
'use client'

import * as React from 'react'
import * as SelectPrimitive from '@radix-ui/react-select'
import { CheckIcon, ChevronDownIcon, ChevronUpIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function Select({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Root>) {
  return <SelectPrimitive.Root data-slot="select" {...props} />
}

function SelectGroup({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Group>) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />
}

function SelectValue({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Value>) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />
}

function SelectTrigger({
  className,
  size = 'default',
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {
  size?: 'sm' | 'default'
}) {
  return (
    <SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>
  )
}

function SelectContent({
  className,
  children,
  position = 'popper',
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Content>) {
  return (
    <SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md',
          position === 'popper' &&
            'data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1',
          className,
        )}
        position={position}
        {...props}
      >
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn(
            'p-1',
            position === 'popper' &&
              'h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1',
          )}
        >
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>
  )
}

function SelectLabel({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Label>) {
  return (
    <SelectPrimitive.Label
      data-slot="select-label"
      className={cn('text-muted-foreground px-2 py-1.5 text-xs', className)}
      {...props}
    />
  )
}

function SelectItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Item>) {
  return (
    <SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className,
      )}
      {...props}
    >
      <span className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>
  )
}

function SelectSeparator({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Separator>) {
  return (
    <SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn('bg-border pointer-events-none -mx-1 my-1 h-px', className)}
      {...props}
    />
  )
}

function SelectScrollUpButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {
  return (
    <SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn(
        'flex cursor-default items-center justify-center py-1',
        className,
      )}
      {...props}
    >
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>
  )
}

function SelectScrollDownButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {
  return (
    <SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn(
        'flex cursor-default items-center justify-center py-1',
        className,
      )}
      {...props}
    >
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>
  )
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
}

===== ./components/ui/sheet.tsx =====
'use client'

import * as React from 'react'
import * as SheetPrimitive from '@radix-ui/react-dialog'
import { XIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />
}

function SheetTrigger({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />
}

function SheetClose({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />
}

function SheetPortal({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />
}

function SheetOverlay({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',
        className,
      )}
      {...props}
    />
  )
}

function SheetContent({
  className,
  children,
  side = 'right',
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
  side?: 'top' | 'right' | 'bottom' | 'left'
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
          side === 'right' &&
            'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',
          side === 'left' &&
            'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',
          side === 'top' &&
            'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',
          side === 'bottom' &&
            'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',
          className,
        )}
        {...props}
      >
        {children}
        <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  )
}

function SheetHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sheet-header"
      className={cn('flex flex-col gap-1.5 p-4', className)}
      {...props}
    />
  )
}

function SheetFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn('mt-auto flex flex-col gap-2 p-4', className)}
      {...props}
    />
  )
}

function SheetTitle({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn('text-foreground font-semibold', className)}
      {...props}
    />
  )
}

function SheetDescription({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}

===== ./components/ui/table.tsx =====
'use client'

import * as React from 'react'

import { cn } from '@/lib/utils'

function Table({ className, ...props }: React.ComponentProps<'table'>) {
  return (
    <div
      data-slot="table-container"
      className="relative w-full overflow-x-auto"
    >
      <table
        data-slot="table"
        className={cn('w-full caption-bottom text-sm', className)}
        {...props}
      />
    </div>
  )
}

function TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {
  return (
    <thead
      data-slot="table-header"
      className={cn('[&_tr]:border-b', className)}
      {...props}
    />
  )
}

function TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {
  return (
    <tbody
      data-slot="table-body"
      className={cn('[&_tr:last-child]:border-0', className)}
      {...props}
    />
  )
}

function TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn(
        'bg-muted/50 border-t font-medium [&>tr]:last:border-b-0',
        className,
      )}
      {...props}
    />
  )
}

function TableRow({ className, ...props }: React.ComponentProps<'tr'>) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        'hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors',
        className,
      )}
      {...props}
    />
  )
}

function TableHead({ className, ...props }: React.ComponentProps<'th'>) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',
        className,
      )}
      {...props}
    />
  )
}

function TableCell({ className, ...props }: React.ComponentProps<'td'>) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',
        className,
      )}
      {...props}
    />
  )
}

function TableCaption({
  className,
  ...props
}: React.ComponentProps<'caption'>) {
  return (
    <caption
      data-slot="table-caption"
      className={cn('text-muted-foreground mt-4 text-sm', className)}
      {...props}
    />
  )
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}

===== ./components/ui/tabs.tsx =====
'use client'

import * as React from 'react'
import * as TabsPrimitive from '@radix-ui/react-tabs'

import { cn } from '@/lib/utils'

function Tabs({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Root>) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn('flex flex-col gap-2', className)}
      {...props}
    />
  )
}

function TabsList({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.List>) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',
        className,
      )}
      {...props}
    />
  )
}

function TabsTrigger({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function TabsContent({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Content>) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn('flex-1 outline-none', className)}
      {...props}
    />
  )
}

export { Tabs, TabsList, TabsTrigger, TabsContent }

===== ./components/ui/textarea.tsx =====
import * as React from 'react'

import { cn } from '@/lib/utils'

function Textarea({ className, ...props }: React.ComponentProps<'textarea'>) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        'border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',
        className,
      )}
      {...props}
    />
  )
}

export { Textarea }

===== ./components/ui/toast.tsx =====
'use client'

import * as React from 'react'
import * as ToastPrimitives from '@radix-ui/react-toast'
import { cva, type VariantProps } from 'class-variance-authority'
import { X } from 'lucide-react'

import { cn } from '@/lib/utils'

const ToastProvider = ToastPrimitives.Provider

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      'fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]',
      className,
    )}
    {...props}
  />
))
ToastViewport.displayName = ToastPrimitives.Viewport.displayName

const toastVariants = cva(
  'group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full',
  {
    variants: {
      variant: {
        default: 'border bg-background text-foreground',
        destructive:
          'destructive group border-destructive bg-destructive text-destructive-foreground',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
)

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &
    VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  )
})
Toast.displayName = ToastPrimitives.Root.displayName

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      'inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive',
      className,
    )}
    {...props}
  />
))
ToastAction.displayName = ToastPrimitives.Action.displayName

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      'absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600',
      className,
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
))
ToastClose.displayName = ToastPrimitives.Close.displayName

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title
    ref={ref}
    className={cn('text-sm font-semibold', className)}
    {...props}
  />
))
ToastTitle.displayName = ToastPrimitives.Title.displayName

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn('text-sm opacity-90', className)}
    {...props}
  />
))
ToastDescription.displayName = ToastPrimitives.Description.displayName

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>

type ToastActionElement = React.ReactElement<typeof ToastAction>

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
}

===== ./components/ui/toaster.tsx =====
'use client'

import { useToast } from '@/hooks/use-toast'
import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from '@/components/ui/toast'

export function Toaster() {
  const { toasts } = useToast()

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{description}</ToastDescription>
              )}
            </div>
            {action}
            <ToastClose />
          </Toast>
        )
      })}
      <ToastViewport />
    </ToastProvider>
  )
}

===== ./components/ui/separator.tsx =====
'use client'

import * as React from 'react'
import * as SeparatorPrimitive from '@radix-ui/react-separator'

import { cn } from '@/lib/utils'

function Separator({
  className,
  orientation = 'horizontal',
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        'bg-border shrink-0',
        orientation === 'horizontal' ? 'h-px w-full' : 'h-full w-px',
        className,
      )}
      {...props}
    />
  )
}

export { Separator }
===== ./components/LoadingSpinner.tsx =====
export function LoadingSpinner() {
  return (
    <div className="flex items-center justify-center p-8">
      <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
    </div>
  );
}

===== ./components/Header.tsx =====
'use client';

import Link from 'next/link';
import { useAuth } from '@/contexts/AuthContext';
import { Button } from '@/components/ui/button';
import { ShoppingCart, User, LogOut, Flame, Menu, Shield, Package } from 'lucide-react';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { Badge } from '@/components/ui/badge';
import { Sheet, SheetContent, SheetTrigger } from '@/components/ui/sheet';
import { usePathname } from 'next/navigation';

export function Header() {
  const { user, logout, isAdmin } = useAuth();
  const pathname = usePathname();

  // Componente de navegaci√≥n que se actualiza con el estado de auth
  const Navigation = () => (
    <>
      <Link 
        href="/" 
        className={`text-sm font-medium hover:text-primary transition-colors relative group ${
          pathname === '/' ? 'text-primary' : ''
        }`}
      >
        Inicio
        <span className={`absolute -bottom-1 left-0 h-0.5 bg-primary transition-all ${
          pathname === '/' ? 'w-full' : 'w-0 group-hover:w-full'
        }`} />
      </Link>
      <Link 
        href="/productos" 
        className={`text-sm font-medium hover:text-primary transition-colors relative group ${
          pathname === '/productos' || pathname?.startsWith('/productos/') ? 'text-primary' : ''
        }`}
      >
        Productos
        <span className={`absolute -bottom-1 left-0 h-0.5 bg-primary transition-all ${
          pathname === '/productos' || pathname?.startsWith('/productos/') ? 'w-full' : 'w-0 group-hover:w-full'
        }`} />
      </Link>
      <Link 
        href="/servicios" 
        className={`text-sm font-medium hover:text-primary transition-colors relative group ${
          pathname === '/servicios' ? 'text-primary' : ''
        }`}
      >
        Servicios
        <span className={`absolute -bottom-1 left-0 h-0.5 bg-primary transition-all ${
          pathname === '/servicios' ? 'w-full' : 'w-0 group-hover:w-full'
        }`} />
      </Link>
      {/* ‚úÖ CORREGIDO: Solo mostrar una vez el enlace Admin */}
      {isAdmin && (
        <Link 
          href="/admin" 
          className={`text-sm font-medium hover:text-primary transition-colors relative group flex items-center gap-2 ${
            pathname?.startsWith('/admin') ? 'text-primary' : ''
          }`}
        >
          <Shield className="h-4 w-4" />
          <span>Panel Admin</span>
          <span className={`absolute -bottom-1 left-0 h-0.5 bg-primary transition-all ${
            pathname?.startsWith('/admin') ? 'w-full' : 'w-0 group-hover:w-full'
          }`} />
        </Link>
      )}
    </>
  );

  return (
    <header className="sticky top-0 z-50 w-full border-b border-border/40 bg-background/80 backdrop-blur-xl supports-[backdrop-filter]:bg-background/60">
      <div className="container mx-auto px-4 flex h-16 items-center justify-between">
        {/* Logo */}
        <Link href="/" className="flex items-center gap-2 font-bold text-xl group">
          <div className="h-9 w-9 rounded-lg bg-gradient-to-br from-primary to-accent flex items-center justify-center group-hover:scale-110 transition-transform">
            <Flame className="h-5 w-5 text-primary-foreground" />
          </div>
          <span className="hidden sm:inline">Fire<span className="gradient-text">X</span></span>
        </Link>

        {/* Desktop Navigation */}
        <nav className="hidden md:flex items-center gap-8">
          <Navigation />
        </nav>

        {/* Mobile Menu */}
        <Sheet>
          <SheetTrigger asChild className="md:hidden">
            <Button variant="ghost" size="icon">
              <Menu className="h-5 w-5" />
            </Button>
          </SheetTrigger>
          <SheetContent side="left">
            <div className="flex flex-col gap-6 mt-8">
              <Navigation />
            </div>
          </SheetContent>
        </Sheet>

        {/* Right Actions */}
        <div className="flex items-center gap-2">
          {/* Cart Button */}
          <Button variant="ghost" size="icon" className="relative group" asChild>
            <Link href="/carrito">
              <ShoppingCart className="h-5 w-5 group-hover:text-primary transition-colors" />
              <span className="sr-only">Carrito</span>
            </Link>
          </Button>

          {/* User Menu or Login Button */}
          {user ? (
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="ghost" size="icon" className="group">
                  <div className="h-8 w-8 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center group-hover:scale-110 transition-transform">
                    <User className="h-4 w-4 text-primary-foreground" />
                  </div>
                  <span className="sr-only">Perfil de usuario</span>
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end" className="w-56">
                <DropdownMenuLabel>
                  <div className="flex flex-col gap-1">
                    <p className="text-sm font-semibold">{user.name}</p>
                    <p className="text-xs text-muted-foreground">{user.email}</p>
                    {isAdmin && (
                      <Badge variant="secondary" className="w-fit mt-1 text-xs">
                        Administrador
                      </Badge>
                    )}
                  </div>
                </DropdownMenuLabel>
                <DropdownMenuSeparator />
                <DropdownMenuItem asChild>
                  <Link href="/perfil">
                    <User className="mr-2 h-4 w-4" />
                    Mi Perfil
                  </Link>
                </DropdownMenuItem>
                <DropdownMenuItem asChild>
                  <Link href="/mis-solicitudes">
                    <Package className="mr-2 h-4 w-4" />
                    Mis Solicitudes
                  </Link>
                </DropdownMenuItem>
                {/* ‚úÖ Panel admin en el men√∫ desplegable */}
                {isAdmin && (
                  <>
                    <DropdownMenuSeparator />
                    <DropdownMenuItem asChild>
                      <Link href="/admin" className="text-primary">
                        <Shield className="mr-2 h-4 w-4" />
                        Panel Administrador
                      </Link>
                    </DropdownMenuItem>
                  </>
                )}
                <DropdownMenuSeparator />
                <DropdownMenuItem 
                  onClick={logout} 
                  className="text-destructive focus:text-destructive"
                >
                  <LogOut className="mr-2 h-4 w-4" />
                  Cerrar Sesi√≥n
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          ) : (
            <Button asChild size="sm" className="bg-gradient-to-r from-primary to-accent hover:opacity-90">
              <Link href="/login">Ingresar</Link>
            </Button>
          )}
        </div>
      </div>
    </header>
  );
}
===== ./components/ProductCard.tsx =====
'use client';

import { useState } from 'react';
import Image from 'next/image';
import Link from 'next/link';
import { Product } from '@/types/api';
import { Card, CardContent, CardFooter } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { ShoppingCart, Eye } from 'lucide-react';
import { useAuth } from '@/contexts/AuthContext';
import { addToCart } from '@/lib/api-client';
import { useToast } from '@/hooks/use-toast';

type ProductCardProps = {
  product: Product;
};

export function ProductCard({ product }: ProductCardProps) {
  const { user } = useAuth();
  const { toast } = useToast();
  const [isAdding, setIsAdding] = useState(false);
  const [isHovered, setIsHovered] = useState(false);

  const handleAddToCart = async (e: React.MouseEvent) => {
    e.preventDefault();
    
    if (!user) {
      toast({
        title: 'Debes iniciar sesi√≥n',
        description: 'Inicia sesi√≥n para agregar productos al carrito',
        variant: 'destructive',
      });
      return;
    }

    setIsAdding(true);
    try {
      const response = await addToCart(user.id, product.id, 1);
      if (response.success) {
        toast({
          title: 'Producto agregado',
          description: `${product.name} se agreg√≥ al carrito`,
        });
      }
    } catch (error) {
      toast({
        title: 'Error',
        description: error instanceof Error ? error.message : 'No se pudo agregar el producto',
        variant: 'destructive',
      });
    } finally {
      setIsAdding(false);
    }
  };

  return (
    <Link 
      href={`/productos/${product.id}`} 
      className="group block"
      onMouseEnter={() => setIsHovered(true)}
      onMouseLeave={() => setIsHovered(false)}
    >
      <Card className="overflow-hidden border-2 hover:border-primary/30 transition-all duration-500 hover:shadow-2xl hover:-translate-y-3 h-full flex flex-col relative">
        <div className="absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none" />
        
        <div className="relative aspect-square bg-muted overflow-hidden">
          <Image
            src={product.imageUrl || `/placeholder.svg?height=400&width=400&query=${encodeURIComponent(product.name)}`}
            alt={product.name}
            fill
            className="object-cover group-hover:scale-110 transition-transform duration-700"
          />
          
          <div className={`absolute inset-0 bg-black/60 backdrop-blur-sm transition-all duration-500 flex items-center justify-center ${isHovered ? 'opacity-100' : 'opacity-0'}`}>
            <Button size="sm" variant="secondary" className="gap-2 shadow-xl animate-scale-in">
              <Eye className="h-4 w-4" />
              Ver Detalles
            </Button>
          </div>

          {product.stock === 0 && (
            <Badge className="absolute top-3 right-3 shadow-lg animate-slide-in-right" variant="destructive">
              Agotado
            </Badge>
          )}
          {product.stock > 0 && product.stock <= 10 && (
            <Badge className="absolute top-3 right-3 shadow-lg bg-accent text-accent-foreground animate-slide-in-right animate-glow">
              √öltimas {product.stock} unidades
            </Badge>
          )}
        </div>
        
        <CardContent className="flex-1 p-6 relative">
          <h3 className="font-bold text-lg line-clamp-2 mb-2 group-hover:text-primary transition-colors duration-300">
            {product.name}
          </h3>
          <p className="text-sm text-muted-foreground line-clamp-2 leading-relaxed">
            {product.description}
          </p>
          <div className="mt-4 flex items-baseline gap-2">
            <span className="text-3xl font-bold gradient-text">
              ${product.price.toLocaleString()}
            </span>
            <span className="text-xs text-muted-foreground px-2 py-1 rounded-full bg-muted transition-colors group-hover:bg-primary/10">
              Stock: {product.stock}
            </span>
          </div>
        </CardContent>
        
        <CardFooter className="p-6 pt-0 relative">
          <Button
            className="w-full bg-gradient-to-r from-primary to-accent hover:opacity-90 hover:scale-105 transition-all duration-300 shadow-lg"
            onClick={handleAddToCart}
            disabled={product.stock === 0 || isAdding}
          >
            <ShoppingCart className="mr-2 h-4 w-4" />
            {isAdding ? 'Agregando...' : product.stock === 0 ? 'Sin Stock' : 'Agregar al Carrito'}
          </Button>
        </CardFooter>
      </Card>
    </Link>
  );
}

===== ./components/AnimatedBackground.tsx =====
'use client';

import { useEffect, useRef } from 'react';

export function AnimatedBackground() {
  const canvasRef = useRef<HTMLCanvasElement>(null);

  useEffect(() => {
    const canvas = canvasRef.current;
    if (!canvas) return;

    const ctx = canvas.getContext('2d');
    if (!ctx) return;

    const setCanvasSize = () => {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    };

    setCanvasSize();
    window.addEventListener('resize', setCanvasSize);

    // Particles configuration
    const particles: Array<{
      x: number;
      y: number;
      vx: number;
      vy: number;
      radius: number;
      opacity: number;
      color: string;
    }> = [];

    const colors = [
      'rgba(239, 68, 68, ',   // red
      'rgba(249, 115, 22, ',  // orange
      'rgba(234, 88, 12, ',   // darker orange
      'rgba(220, 38, 38, ',   // darker red
    ];

    // Create particles
    for (let i = 0; i < 80; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        vx: (Math.random() - 0.5) * 0.3,
        vy: (Math.random() - 0.5) * 0.3,
        radius: Math.random() * 2 + 1,
        opacity: Math.random() * 0.5 + 0.2,
        color: colors[Math.floor(Math.random() * colors.length)],
      });
    }

    // Animation loop
    let animationId: number;
    const animate = () => {
      ctx.fillStyle = 'rgba(15, 15, 20, 0.1)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      particles.forEach((particle, i) => {
        // Update position
        particle.x += particle.vx;
        particle.y += particle.vy;

        // Wrap around edges
        if (particle.x < 0) particle.x = canvas.width;
        if (particle.x > canvas.width) particle.x = 0;
        if (particle.y < 0) particle.y = canvas.height;
        if (particle.y > canvas.height) particle.y = 0;

        // Draw particle
        ctx.beginPath();
        ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
        ctx.fillStyle = particle.color + particle.opacity + ')';
        ctx.fill();

        // Draw connections
        particles.forEach((particle2, j) => {
          if (i === j) return;
          const dx = particle.x - particle2.x;
          const dy = particle.y - particle2.y;
          const distance = Math.sqrt(dx * dx + dy * dy);

          if (distance < 150) {
            ctx.beginPath();
            ctx.moveTo(particle.x, particle.y);
            ctx.lineTo(particle2.x, particle2.y);
            const opacity = (1 - distance / 150) * 0.2;
            ctx.strokeStyle = particle.color + opacity + ')';
            ctx.lineWidth = 0.5;
            ctx.stroke();
          }
        });

        // Pulse effect
        particle.opacity = 0.2 + Math.sin(Date.now() * 0.001 + i) * 0.3;
      });

      animationId = requestAnimationFrame(animate);
    };

    animate();

    return () => {
      window.removeEventListener('resize', setCanvasSize);
      cancelAnimationFrame(animationId);
    };
  }, []);

  return (
    <canvas
      ref={canvasRef}
      className="fixed inset-0 w-full h-full pointer-events-none z-0"
      style={{ background: 'linear-gradient(to bottom, #0f0f14, #1a1a24)' }}
    />
  );
}

===== ./components/ValidatedInput.tsx =====
'use client';

import { useState, useEffect } from 'react';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import { AlertCircle, CheckCircle2 } from 'lucide-react';

interface ValidatedInputProps {
  id: string;
  label: string;
  type?: 'text' | 'email' | 'tel' | 'password' | 'date' | 'textarea';
  value: string;
  onChange: (value: string) => void;
  validator?: (value: string) => boolean;
  errorMessage?: string;
  placeholder?: string;
  required?: boolean;
  disabled?: boolean;
  helperText?: string;
  showValidIcon?: boolean;
  validateOnBlur?: boolean;
  rows?: number;
  min?: string;
  pattern?: string;
}

export function ValidatedInput({
  id,
  label,
  type = 'text',
  value,
  onChange,
  validator,
  errorMessage,
  placeholder,
  required = false,
  disabled = false,
  helperText,
  showValidIcon = true,
  validateOnBlur = true,
  rows = 3,
  min,
  pattern,
}: ValidatedInputProps) {
  const [touched, setTouched] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [isValid, setIsValid] = useState(false);

  // Validar cuando cambia el valor
  useEffect(() => {
    if (!touched && !value) {
      setError(null);
      setIsValid(false);
      return;
    }

    if (required && !value.trim()) {
      setError('Este campo es requerido');
      setIsValid(false);
      return;
    }

    if (validator && value) {
      const valid = validator(value);
      setIsValid(valid);
      setError(valid ? null : (errorMessage || 'Valor inv√°lido'));
    } else {
      setIsValid(!!value);
      setError(null);
    }
  }, [value, validator, errorMessage, required, touched]);

  const handleBlur = () => {
    if (validateOnBlur) {
      setTouched(true);
    }
  };

  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    onChange(e.target.value);
    if (!touched) {
      setTouched(true);
    }
  };

  const showError = touched && error;
  const showSuccess = touched && isValid && showValidIcon && value;

  const InputComponent = type === 'textarea' ? Textarea : Input;

  return (
    <div className="space-y-2">
      <Label htmlFor={id} className="flex items-center gap-2">
        {label}
        {required && <span className="text-destructive">*</span>}
      </Label>

      <div className="relative">
        <InputComponent
          id={id}
          type={type === 'textarea' ? undefined : type}
          value={value}
          onChange={handleChange}
          onBlur={handleBlur}
          placeholder={placeholder}
          disabled={disabled}
          required={required}
          rows={type === 'textarea' ? rows : undefined}
          min={min}
          pattern={pattern}
          className={`
            ${showError ? 'border-destructive focus-visible:ring-destructive/20' : ''}
            ${showSuccess ? 'border-green-500 focus-visible:ring-green-500/20' : ''}
            ${showSuccess ? 'pr-10' : ''}
          `}
          aria-invalid={showError ? 'true' : 'false'}
          aria-describedby={
            showError ? `${id}-error` : helperText ? `${id}-helper` : undefined
          }
        />

        {/* Icono de validaci√≥n */}
        {showSuccess && type !== 'textarea' && (
          <div className="absolute right-3 top-1/2 -translate-y-1/2">
            <CheckCircle2 className="h-5 w-5 text-green-500" />
          </div>
        )}
      </div>

      {/* Mensaje de error */}
      {showError && (
        <div
          id={`${id}-error`}
          className="flex items-center gap-2 text-sm text-destructive animate-slide-in-left"
        >
          <AlertCircle className="h-4 w-4" />
          <span>{error}</span>
        </div>
      )}

      {/* Texto de ayuda */}
      {helperText && !showError && (
        <p id={`${id}-helper`} className="text-sm text-muted-foreground">
          {helperText}
        </p>
      )}
    </div>
  );
}
===== ./hooks/use-mobile.ts =====
import * as React from 'react'

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    }
    mql.addEventListener('change', onChange)
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    return () => mql.removeEventListener('change', onChange)
  }, [])

  return !!isMobile
}

===== ./hooks/use-toast.ts =====
'use client'

// Inspired by react-hot-toast library
import * as React from 'react'

import type { ToastActionElement, ToastProps } from '@/components/ui/toast'

const TOAST_LIMIT = 1
const TOAST_REMOVE_DELAY = 1000000

type ToasterToast = ToastProps & {
  id: string
  title?: React.ReactNode
  description?: React.ReactNode
  action?: ToastActionElement
}

const actionTypes = {
  ADD_TOAST: 'ADD_TOAST',
  UPDATE_TOAST: 'UPDATE_TOAST',
  DISMISS_TOAST: 'DISMISS_TOAST',
  REMOVE_TOAST: 'REMOVE_TOAST',
} as const

let count = 0

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER
  return count.toString()
}

type ActionType = typeof actionTypes

type Action =
  | {
      type: ActionType['ADD_TOAST']
      toast: ToasterToast
    }
  | {
      type: ActionType['UPDATE_TOAST']
      toast: Partial<ToasterToast>
    }
  | {
      type: ActionType['DISMISS_TOAST']
      toastId?: ToasterToast['id']
    }
  | {
      type: ActionType['REMOVE_TOAST']
      toastId?: ToasterToast['id']
    }

interface State {
  toasts: ToasterToast[]
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId)
    dispatch({
      type: 'REMOVE_TOAST',
      toastId: toastId,
    })
  }, TOAST_REMOVE_DELAY)

  toastTimeouts.set(toastId, timeout)
}

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case 'ADD_TOAST':
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      }

    case 'UPDATE_TOAST':
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t,
        ),
      }

    case 'DISMISS_TOAST': {
      const { toastId } = action

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId)
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id)
        })
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t,
        ),
      }
    }
    case 'REMOVE_TOAST':
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        }
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      }
  }
}

const listeners: Array<(state: State) => void> = []

let memoryState: State = { toasts: [] }

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action)
  listeners.forEach((listener) => {
    listener(memoryState)
  })
}

type Toast = Omit<ToasterToast, 'id'>

function toast({ ...props }: Toast) {
  const id = genId()

  const update = (props: ToasterToast) =>
    dispatch({
      type: 'UPDATE_TOAST',
      toast: { ...props, id },
    })
  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })

  dispatch({
    type: 'ADD_TOAST',
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss()
      },
    },
  })

  return {
    id: id,
    dismiss,
    update,
  }
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState)

  React.useEffect(() => {
    listeners.push(setState)
    return () => {
      const index = listeners.indexOf(setState)
      if (index > -1) {
        listeners.splice(index, 1)
      }
    }
  }, [state])

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),
  }
}

export { useToast, toast }

===== ./lib/utils.ts =====
import { clsx, type ClassValue } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

===== ./lib/api-client.ts =====
import type {
  ApiResponse,
  Product,
  Category,
  Cart,
  LoginResponse,
  UserResponse,
  RegisterRequest,
  ServiceRequest,
  ServiceRequestCreate,
} from '@/types/api';

const BASE_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8066';

// ============ CORE API UTILITIES ============
async function apiCall<T>(endpoint: string, options?: RequestInit): Promise<T> {
  try {
    const response = await fetch(`${BASE_URL}${endpoint}`, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options?.headers,
      },
    });

    if (!response.ok) {
      const error = await response.json().catch(() => ({ 
        message: `HTTP error! status: ${response.status}` 
      }));
      throw new Error(error.message || `Error ${response.status}`);
    }
    
    return response.json();
  } catch (error) {
    if (error instanceof Error) {
      throw error;
    }
    throw new Error('Network error: No se pudo conectar con el servidor');
  }
}

// Generic CRUD operations
const createCRUD = <T>(basePath: string) => ({
  getAll: () => apiCall<ApiResponse<T[]>>(basePath),
  getById: (id: string) => apiCall<ApiResponse<T>>(`${basePath}/${id}`),
  create: (data: Partial<T>) => 
    apiCall<ApiResponse<T>>(basePath, { 
      method: 'POST', 
      body: JSON.stringify(data) 
    }),
  update: (id: string, data: Partial<T>) => 
    apiCall<ApiResponse<T>>(`${basePath}/${id}`, { 
      method: 'PUT', 
      body: JSON.stringify(data) 
    }),
  delete: (id: string) => 
    apiCall<ApiResponse<void>>(`${basePath}/${id}`, { method: 'DELETE' }),
});

// ============ RESOURCE APIs ============
export const products = {
  ...createCRUD<Product>('/api/products'),
  search: (keyword: string) => 
    apiCall<ApiResponse<Product[]>>(`/api/products/search?keyword=${encodeURIComponent(keyword)}`),
  byCategory: (categoryId: string) => 
    apiCall<ApiResponse<Product[]>>(`/api/products/category/${categoryId}`),
  available: () => apiCall<ApiResponse<Product[]>>('/api/products/available'),
  lowStock: (threshold = 10) => 
    apiCall<ApiResponse<Product[]>>(`/api/products/low-stock?threshold=${threshold}`),
};

export const categories = createCRUD<Category>('/api/categories');

// ============ CART API ============
export const cart = {
  get: (userId: string) => apiCall<ApiResponse<Cart>>(`/api/cart/${userId}`),
  addItem: (userId: string, productId: string, quantity: number) =>
    apiCall<ApiResponse<Cart>>(`/api/cart/${userId}/items`, {
      method: 'POST',
      body: JSON.stringify({ productId, quantity }),
    }),
  updateItem: (userId: string, productId: string, quantity: number) =>
    apiCall<ApiResponse<Cart>>(`/api/cart/${userId}/items/${productId}`, {
      method: 'PUT',
      body: JSON.stringify({ quantity }),
    }),
  removeItem: (userId: string, productId: string) =>
    apiCall<ApiResponse<Cart>>(`/api/cart/${userId}/items/${productId}`, { 
      method: 'DELETE' 
    }),
  clear: (userId: string) => 
    apiCall<ApiResponse<Cart>>(`/api/cart/${userId}`, { method: 'DELETE' }),
};

// ============ AUTH API ============
export const auth = {
  register: (data: RegisterRequest) => 
    apiCall<ApiResponse<UserResponse>>('/api/users/register', {
      method: 'POST',
      body: JSON.stringify(data),
    }),
  login: (email: string, password: string) =>
    apiCall<LoginResponse>('/api/users/login', {
      method: 'POST',
      body: JSON.stringify({ email, password }),
    }),
};

// ============ USERS API ============
export const users = {
  getAll: () => apiCall<ApiResponse<UserResponse[]>>('/api/users/all'),
  updateProfile: (id: string, data: Partial<UserResponse>) =>
    apiCall<ApiResponse<UserResponse>>(`/api/users/profile/${id}`, {
      method: 'PUT',
      body: JSON.stringify(data),
    }),
  delete: (id: string) => 
    apiCall<ApiResponse<void>>(`/api/users/${id}`, { method: 'DELETE' }),
};

// ============ SERVICE REQUESTS API ============
export const serviceRequests = {
  create: (userId: string, userEmail: string, data: ServiceRequestCreate) =>
    apiCall<ApiResponse<ServiceRequest>>('/api/service-requests', {
      method: 'POST',
      headers: { 
        'User-Id': userId, 
        'User-Email': userEmail 
      },
      body: JSON.stringify(data),
    }),
  getAll: () => 
    apiCall<ApiResponse<ServiceRequest[]>>('/api/service-requests'),
  getById: (id: string) => 
    apiCall<ApiResponse<ServiceRequest>>(`/api/service-requests/${id}`),
  getByRequestId: (requestId: string) => 
    apiCall<ApiResponse<ServiceRequest>>(`/api/service-requests/request/${requestId}`),
  getMine: (email: string) => 
    apiCall<ApiResponse<ServiceRequest[]>>(
      `/api/service-requests/my-requests?email=${encodeURIComponent(email)}`
    ),
  getByStatus: (status: string) => 
    apiCall<ApiResponse<ServiceRequest[]>>(`/api/service-requests/status/${status}`),
  updateStatus: (id: string, status: string, updatedBy = 'admin') =>
    apiCall<ApiResponse<ServiceRequest>>(`/api/service-requests/${id}/status`, {
      method: 'PUT',
      headers: { 'Updated-By': updatedBy },
      body: JSON.stringify({ status }),
    }),
  delete: (id: string) => 
    apiCall<ApiResponse<void>>(`/api/service-requests/${id}`, { 
      method: 'DELETE' 
    }),
};

// ============ LEGACY COMPATIBILITY ============
// Mantener para no romper c√≥digo existente
export const getProducts = products.getAll;
export const getProductById = products.getById;
export const createProduct = products.create;
export const updateProduct = products.update;
export const deleteProduct = products.delete;
export const searchProducts = products.search;
export const getProductsByCategory = products.byCategory;

export const getCategories = categories.getAll;
export const getCategoryById = categories.getById;
export const createCategory = categories.create;
export const updateCategory = categories.update;
export const deleteCategory = categories.delete;

export const getCart = cart.get;
export const addToCart = cart.addItem;
export const updateCartItem = cart.updateItem;
export const removeFromCart = cart.removeItem;
export const clearCart = cart.clear;

export const register = auth.register;
export const login = auth.login;
export const updateProfile = users.updateProfile;
export const getAllUsers = users.getAll;
export const deleteUser = users.delete;

export const createServiceRequest = serviceRequests.create;
export const getAllServiceRequests = serviceRequests.getAll;
export const getServiceRequestById = serviceRequests.getById;
export const getMyServiceRequests = serviceRequests.getMine;
export const updateServiceRequestStatus = serviceRequests.updateStatus;
===== ./lib/validators.ts =====
// lib/validators.ts
import type { ServiceRequestCreate, RegisterRequest } from '@/types/api';

/**
 * Validadores b√°sicos reutilizables
 */
export const validators = {
  /**
   * Valida tel√©fono colombiano (10 d√≠gitos, empieza con 3)
   * Ejemplo v√°lido: 3001234567
   */
  phone: (phone: string): boolean => {
    if (!phone) return false;
    const cleaned = phone.replace(/\s/g, '');
    return /^3[0-9]{9}$/.test(cleaned);
  },

  /**
   * Valida que la fecha sea futura (no puede ser pasada)
   */
  date: (dateString: string): boolean => {
    if (!dateString) return false;
    
    const selected = new Date(dateString);
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    // Fecha debe ser hoy o futura
    return selected >= today;
  },

  /**
   * Valida que la fecha no sea m√°s de 3 meses en el futuro
   */
  dateNotTooFar: (dateString: string): boolean => {
    if (!dateString) return false;
    
    const selected = new Date(dateString);
    const maxDate = new Date();
    maxDate.setMonth(maxDate.getMonth() + 3);
    
    return selected <= maxDate;
  },

  /**
   * Valida email b√°sico
   */
  email: (email: string): boolean => {
    if (!email) return false;
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  },

  /**
   * Valida nombre (m√≠nimo 3 caracteres, solo letras y espacios)
   */
  name: (name: string): boolean => {
    if (!name) return false;
    const trimmed = name.trim();
    return trimmed.length >= 3 && /^[a-zA-Z√°√©√≠√≥√∫√Å√â√ç√ì√ö√±√ë\s]+$/.test(trimmed);
  },

  /**
   * Valida direcci√≥n (m√≠nimo 10 caracteres)
   */
  address: (address: string): boolean => {
    if (!address) return false;
    return address.trim().length >= 10;
  },

  /**
   * Valida contrase√±a (m√≠nimo 6 caracteres)
   */
  password: (password: string): boolean => {
    if (!password) return false;
    return password.length >= 6;
  },

  /**
   * Valida que un string no est√© vac√≠o
   */
  required: (value: string): boolean => {
    return value !== undefined && value !== null && value.trim().length > 0;
  },
};

/**
 * Tipo para errores de validaci√≥n
 */
export type ValidationErrors = Record<string, string>;

/**
 * Resultado de una validaci√≥n
 */
export interface ValidationResult {
  isValid: boolean;
  errors: ValidationErrors;
}

/**
 * Valida una solicitud de servicio completa
 */
export const validateServiceRequest = (
  data: ServiceRequestCreate
): ValidationResult => {
  const errors: ValidationErrors = {};

  // Validar tel√©fono
  if (!validators.phone(data.telefono)) {
    errors.telefono = 'Tel√©fono inv√°lido. Debe ser un celular colombiano (ej: 3001234567)';
  }

  // Validar fecha
  if (!validators.date(data.fecha)) {
    errors.fecha = 'La fecha debe ser hoy o en el futuro';
  } else if (!validators.dateNotTooFar(data.fecha)) {
    errors.fecha = 'La fecha no puede ser m√°s de 3 meses en el futuro';
  }

  // Validar direcci√≥n
  if (!validators.address(data.direccion)) {
    errors.direccion = 'La direcci√≥n debe tener al menos 10 caracteres';
  }

  // Validar campos requeridos
  if (!validators.required(data.tipo)) {
    errors.tipo = 'Debe seleccionar un tipo de extintor';
  }

  if (!validators.required(data.estadoExtintor)) {
    errors.estadoExtintor = 'Debe indicar el estado del extintor';
  }

  if (!validators.required(data.franja)) {
    errors.franja = 'Debe seleccionar una franja horaria';
  }

  return {
    isValid: Object.keys(errors).length === 0,
    errors,
  };
};

/**
 * Valida un formulario de registro
 */
export const validateRegisterForm = (
  data: RegisterRequest
): ValidationResult => {
  const errors: ValidationErrors = {};

  // Validar nombre
  if (!validators.name(data.name)) {
    errors.name = 'El nombre debe tener al menos 3 caracteres y solo letras';
  }

  // Validar email
  if (!validators.email(data.email)) {
    errors.email = 'Email inv√°lido';
  }

  // Validar contrase√±a
  if (!validators.password(data.password)) {
    errors.password = 'La contrase√±a debe tener al menos 6 caracteres';
  }

  // Validar tel√©fono
  if (!validators.phone(data.phone)) {
    errors.phone = 'Tel√©fono inv√°lido. Debe ser un celular colombiano (ej: 3001234567)';
  }

  // Validar direcci√≥n
  if (!validators.address(data.address)) {
    errors.address = 'La direcci√≥n debe tener al menos 10 caracteres';
  }

  return {
    isValid: Object.keys(errors).length === 0,
    errors,
  };
};

/**
 * Valida un formulario de login
 */
export const validateLoginForm = (
  email: string,
  password: string
): ValidationResult => {
  const errors: ValidationErrors = {};

  if (!validators.email(email)) {
    errors.email = 'Email inv√°lido';
  }

  if (!validators.required(password)) {
    errors.password = 'La contrase√±a es requerida';
  }

  return {
    isValid: Object.keys(errors).length === 0,
    errors,
  };
};

/**
 * Formatea un tel√©fono para mostrar (3XX XXX XXXX)
 */
export const formatPhone = (phone: string): string => {
  const cleaned = phone.replace(/\D/g, '');
  if (cleaned.length === 10) {
    return `${cleaned.slice(0, 3)} ${cleaned.slice(3, 6)} ${cleaned.slice(6)}`;
  }
  return phone;
};

/**
 * Limpia un tel√©fono para enviar al backend (solo n√∫meros)
 */
export const cleanPhone = (phone: string): string => {
  return phone.replace(/\D/g, '');
};
===== ./next.config.mjs =====
/** @type {import('next').NextConfig} */
const nextConfig = {
  typescript: {
    ignoreBuildErrors: true,
  },
  images: {
    unoptimized: true,
  },
}

export default nextConfig

===== ./postcss.config.mjs =====
/** @type {import('postcss-load-config').Config} */
const config = {
  plugins: {
    '@tailwindcss/postcss': {},
  },
}

export default config

===== ./styles/globals.css =====
@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

:root {
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --destructive-foreground: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --radius: 0.625rem;
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.145 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.145 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.396 0.141 25.723);
  --destructive-foreground: oklch(0.637 0.237 25.331);
  --border: oklch(0.269 0 0);
  --input: oklch(0.269 0 0);
  --ring: oklch(0.439 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.269 0 0);
  --sidebar-ring: oklch(0.439 0 0);
}

@theme inline {
  --font-sans: 'Geist', 'Geist Fallback';
  --font-mono: 'Geist Mono', 'Geist Mono Fallback';
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

===== ./contexts/AuthContext.tsx =====
'use client';

import { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import type { UserResponse } from '@/types/api';

type AuthContextType = {
  user: UserResponse | null;
  token: string | null;
  login: (user: UserResponse, token: string) => void;
  logout: () => void;
  setUser: (user: UserResponse) => void;
  isAuthenticated: boolean;
  isAdmin: boolean;
};

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export function AuthProvider({ children }: { children: ReactNode }) {
  const [user, setUserState] = useState<UserResponse | null>(null);
  const [token, setToken] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  // ‚úÖ Cargar datos al montar el componente
  useEffect(() => {
    const loadSession = () => {
      try {
        console.log('üîÑ Intentando cargar sesi√≥n...');
        
        const storedToken = localStorage.getItem('firex_token');
        const storedUser = localStorage.getItem('firex_user');
        
        console.log('üì¶ LocalStorage:', {
          hasToken: !!storedToken,
          hasUser: !!storedUser,
          tokenLength: storedToken?.length || 0
        });
        
        if (storedToken && storedUser) {
          const parsedUser = JSON.parse(storedUser);
          setToken(storedToken);
          setUserState(parsedUser);
          console.log('‚úÖ Sesi√≥n restaurada exitosamente:', {
            email: parsedUser.email,
            role: parsedUser.role,
            id: parsedUser.id
          });
        } else {
          console.log('‚ÑπÔ∏è No hay sesi√≥n guardada');
        }
      } catch (error) {
        console.error('‚ùå Error al cargar sesi√≥n:', error);
        // Limpiar datos corruptos
        localStorage.removeItem('firex_token');
        localStorage.removeItem('firex_user');
      } finally {
        setIsLoading(false);
        console.log('‚úì Carga de sesi√≥n completada');
      }
    };

    // Ejecutar inmediatamente
    loadSession();
  }, []);

  const login = (userData: UserResponse, jwtToken: string) => {
    console.log('üîê Ejecutando login en contexto:', {
      email: userData.email,
      role: userData.role,
      token: jwtToken ? '‚úì Token presente' : '‚úó Sin token'
    });
    
    try {
      // Actualizar estado
      setUserState(userData);
      setToken(jwtToken);
      
      // Guardar en localStorage
      localStorage.setItem('firex_user', JSON.stringify(userData));
      localStorage.setItem('firex_token', jwtToken);
      
      // Verificar que se guard√≥
      const saved = localStorage.getItem('firex_user');
      console.log('‚úÖ Datos guardados en localStorage:', !!saved);
      
    } catch (error) {
      console.error('‚ùå Error al guardar sesi√≥n:', error);
    }
  };

  const logout = () => {
    console.log('üö™ Cerrando sesi√≥n');
    setUserState(null);
    setToken(null);
    localStorage.removeItem('firex_user');
    localStorage.removeItem('firex_token');
    console.log('‚úì Sesi√≥n cerrada');
  };

  const setUser = (userData: UserResponse) => {
    console.log('üë§ Actualizando usuario:', userData.email);
    setUserState(userData);
    localStorage.setItem('firex_user', JSON.stringify(userData));
  };

  const value = {
    user,
    token,
    login,
    logout,
    setUser,
    isAuthenticated: !!user && !!token,
    isAdmin: user?.role === 'ADMIN',
  };

  // ‚úÖ Mostrar loading mientras se carga la sesi√≥n
  if (isLoading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-primary"></div>
      </div>
    );
  }

  console.log('üìä Estado actual del auth:', {
    hasUser: !!user,
    hasToken: !!token,
    isAuthenticated: !!user && !!token,
    isAdmin: user?.role === 'ADMIN'
  });

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
}

export function useAuth() {
  const context = useContext(AuthContext);
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
}
===== ./types/api.ts =====
// Generic API Response wrapper
export type ApiResponse<T> = {
  success: boolean;
  message: string;
  data: T | null;
  timestamp: string;
};

// Product types
export type Product = {
  id: string;
  name: string;
  description: string;
  categoryId: string;
  price: number;
  stock: number;
  imageUrl?: string;
  createdAt?: string;
  updatedAt?: string;
};

// Category types
export type Category = {
  id: string;
  name: string;
  description?: string;
};

// Cart types
export type CartItem = {
  productId: string;
  name: string;
  price: number;
  quantity: number;
  subtotal: number;
};

export type Cart = {
  id: string;
  userId: string;
  items: CartItem[];
  totalItems: number;
  totalPrice: number;
};

// User types
export type UserRole = "ADMIN" | "USER";

export type UserResponse = {
  id: string;
  name: string;
  email: string;
  phone?: string;
  address?: string;
  role: UserRole;
};

export type LoginResponse = {
  success: boolean;
  message: string;
  user: UserResponse;
  token?: string;
};

export type RegisterRequest = {
  name: string;
  email: string;
  password: string;
  phone: string;
  address: string;
};

// Service Request types
export type ServiceRequestStatus =
  | "PENDIENTE"
  | "RECOGIDO"
  | "EN_RECARGA"
  | "LISTO"
  | "ENTREGADO"
  | "FINALIZADO";

export type ExtinguisherType = "ABC" | "CO2" | "H2O" | "K";
export type ExtinguisherState = "OPERATIVO" | "DESCARGADO" | "VENCIDO";
export type TimeSlot = "MANANA" | "TARDE";

export type ServiceRequest = {
  id: string;
  requestId: string;
  userId: string;
  customerEmail: string;
  phoneNumber: string;
  address: string;
  extinguisherType: string;
  capacity: string;
  serialNumber?: string;
  additionalNotes?: string;
  preferredDate?: string;
  status: ServiceRequestStatus;
  timeline: TimelineItem[];
  createdAt: string;
  updatedAt: string;
};

export type TimelineItem = {
  status: ServiceRequestStatus;
  timestamp: string;
  updatedBy: string;
};

export type ServiceRequestCreate = {
  tipo: "ABC" | "CO2" | "H2O" | "K";
  estadoExtintor: "Operativo" | "Descargado" | "Vencido";
  fecha: string; // YYYY-MM-DD
  franja: "Ma√±ana" | "Tarde";
  direccion: string;
  telefono: string;
  observaciones?: string;
};

// Healthcheck
export type HealthCheck = {
  service: string;
  status: "UP" | "DOWN";
  timestamp: string;
};

===== ./next-env.d.ts =====
/// <reference types="next" />
/// <reference types="next/image-types/global" />
import "./.next/dev/types/routes.d.ts";

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.

